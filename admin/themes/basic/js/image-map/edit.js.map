{"version":3,"sources":["webpack://[name]/webpack/bootstrap","webpack://[name]/../modules/popup-content-wraper.js","webpack://[name]/../modules/search-category.js","webpack://[name]/../modules/search-info-page.js","webpack://[name]/../modules/search-product.js","webpack://[name]/../modules/tools-bar.js","webpack://[name]/../node_modules/@babel/runtime/helpers/typeof.js","webpack://[name]/./backend/image-maps/edit.js","webpack://[name]/./backend/image-maps/edit/image-map-creator.js","webpack://[name]/./backend/image-maps/edit/save.js","webpack://[name]/./backend/image-maps/edit/style.scss","webpack://[name]/./backend/image-maps/edit/svg-element-attributs-popup.js","webpack://[name]/./backend/image-maps/edit/upload-main-image.js"],"names":["wrapper","content","buttons","heading","allContent","length","forEach","item","i","name","searchCategory","options","op","$","extend","url","suggestWrapClass","suggestClass","suggestItem","itemTextBox","suggestItemClick","input","itemObj","each","searchInput","suggestWrap","suggest","after","append","hide","on","e","get","keywords","val","no_click","data","key","hasOwnProperty","itemHtml","id","text","parent_id","show","search","re","RegExp","trim","serched","replace","html","parents","preventDefault","trigger","setTimeout","searchInfoPage","searchProduct","tools","toolsBar","toolsBar2","toolsBarWrap","topHeadingBar","limitTop","toolsBarMainPosition","toolsBarMainWidth","windowScroll","top","window","scrollTop","css","left","addClass","removeClass","windowResize","height","offset","width","btnUploadImage","btnSave","mapImage","form","svg","uploadMainImage","image","button","uploadUrl","imageMap","imageMapCreator","saveMap","saveUrl","wait","imageMapsData","fromJSON","items","summerHtmlImageMapCreator","utils","getOffset","node","boxCoords","getBoundingClientRect","x","Math","round","pageXOffset","y","pageYOffset","getRightCoords","str","document","getElementById","style","display","encode","foreach","arr","func","count","foreachReverse","debug","output","innerHTML","join","call","arguments","stopEvent","stopPropagation","obj","target","inherits","F","Child","Parent","prototype","constructor","app","domElements","img","container","map","state","appMode","currentType","editType","newArea","selectedArea","areas","events","isDraw","src","filename","KEYS","F1","ESC","TOP","BOTTOM","LEFT","RIGHT","DELETE","I","S","C","recalcOffsetValues","addEventListener","cursor_position_info","coords_info","set","coords","empty","pageX","pageY","onSvgMousedown","parentNode","tagName","info","unload","deselectAll","select","editingStartPoint","classList","contains","helper","action","n","selected_point","addEvent","onProcessEditing","bind","onStopEditing","onSvgClick","code","setIsDraw","Area","CONSTRUCTORS","createAndStartDrawing","onAreaDblClick","load","onDocumentKeyDown","ctrlDown","ctrlKey","metaKey","keyCode","help","remove","pop","removeAllEvents","redraw","move","removeObject","coordsForAttributesForm","getCoordsForDisplayingInfo","saveInLocalStorage","copy","areasIO","toJSON","push","JSON","stringify","parse","areaParams","localStorageWrapper","KEY_NAME","save","result","localStorage","setItem","console","alert","restore","getItem","loadFromLocalStorage","setDimensions","setAttribute","preview","createElement","appendChild","setShape","getHTMLCode","print","hidePreview","addNodeToSvg","removeNodeFromSvg","removeChild","arg","clear","childNodes","splice","deselect","getIsDraw","setMode","getMode","getShape","addObject","object","getNewArea","resetNewArea","getSelectedArea","setSelectedArea","getEditType","setFilename","setEditClass","add","setDrawClass","setDefaultClass","eventType","AppEvent","html_code","toHTMLMapElementString","removeEventListener","Helper","_el","createElementNS","SVG_NS","CLASS_NAME","SIZE","OFFSET","ACTIONS_TO_CURSORS","ceil","setCoords","setId","type","attributes","Error","_type","_attributes","setInfoAttributes","_coords","_groupEl","_helpers","CLASS_NAMES","SELECTED","WITH_HREF","rectangle","Rectangle","circle","Circle","polygon","Polygon","REGEXP","AREA","HREF","ALT","TITLE","DELIMETER","HTML_NAMES_TO_AREA_NAMES","rect","poly","ATTRIBUTES_NAMES","ABSTRACT_METHOD","setSVGCoords","dynamicDraw","onProcessDrawing","onStopDrawing","edit","dynamicEdit","toString","dx","dy","setStyleOfElementWithHref","unsetStyleOfElementWithHref","attr","params","AreaConstructor","testCoords","area","createAreasFromHTMLOfMap","htmlStr","findedResult","exec","htmlAreaFinded","split","Number","getCoordsFromHTMLArray","Boolean","originalArea","center","bottom","right","topLeft","topRight","bottomLeft","bottomRight","center_y","center_x","isSquare","newCoords","getSquareCoords","getNormalizedCoords","shiftKey","editingType","tempParams","Object","create","saveProportions","getSavedProportionsCoords","x2","y2","href","alt","title","testHTMLCoords","htmlCoordsArray","abs","originalCoords","originalProportions","currentProportions","firstPointCoords","cx","cy","radius","helpers","sqrt","pow","tempCoords","points","isOpened","c","_selectedPoint","close","polyline","replaceChild","polygonPointsAttrValue","reduce","previousValue","currentItem","addPoint","isRightAngle","temp_coords","concat","rightPointCoords","getRightAngleLineLastPointCoords","onAddPointDrawing","newPointCoords","TANGENS","DEG_22","DEG_67","lastPointIndex","lastPoint","tan","block","overlay","close_button","querySelector","attributesPopup","from_html_form","code_input","load_button","value","all","from_html","to_html","show_help","selectOne","onSaveButtonClick","onLoadButtonClick","onShapeButtonClick","onClearButtonClick","confirm","onFromHtmlButtonClick","onToHtmlButtonClick","onPreviewButtonClick","onEditButtonClick","onShowHelpButtonClick","savePage","pageData","serializeArray","slice","post","response","inputMapsId","mapsIdTmp","maps_id","history","pushState","log","status","alertMessage","popUpContent","fn","searchInfo","cloneRow","popupTemplateHolder","popupTemplate","popupContent","popUpInputs","repetitiveBox","needAdd","clone","scrollingTabs","linkToPage","linkDefault","linkToProduct","linkToCategory","linkToInfo","linkToBrand","linkToDelivery","linkToCommon","selectLinkType","closest","popUp","box_class","loaded","click","applySvgSize","setAttributeNS","applyImage","file","dropzone","previewTemplate","success"],"mappings":"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","file":"admin/themes/basic/js/image-map/edit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./backend/image-maps/edit.js\");\n","let wrapper = function(content, buttons = [], heading = false){\r\n\r\n    let allContent = '';\r\n    if (heading) {\r\n        allContent += `<div class=\"popup-heading\">${heading}</div>`\r\n    }\r\n    allContent += `<div class=\"popup-content pop-mess-cont\">${content}</div>`;\r\n\r\n    if (buttons.length > 0) {\r\n        allContent += `<div class=\"popup-buttons\">`;\r\n        buttons.forEach(function(item, i) {\r\n            allContent += `<span class=\"btn ${item.class}\">${item.name}</span>`;\r\n        });\r\n        allContent += `</div>`;\r\n    }\r\n\r\n    return allContent;\r\n};\r\nexport default wrapper;","let searchCategory = function(options){\r\n    let op = $.extend({\r\n        url: 'categories/all-list',\r\n        suggestWrapClass: 'search-category',\r\n        suggestClass: 'suggest',\r\n        suggestItem: '.item',\r\n        itemTextBox: '.name',\r\n        suggestItemClick: function(input, itemObj){},\r\n    },options);\r\n\r\n    return this.each(function() {\r\n\r\n        let searchInput = $(this);\r\n        let suggestWrap = $(`<div class=\"${op.suggestWrapClass}\"></div>`);\r\n        let suggest = $(`<div class=\"${op.suggestClass}\"></div>`);\r\n\r\n        searchInput.after(suggestWrap);\r\n        suggestWrap.append(suggest);\r\n        suggest.hide();\r\n\r\n        searchInput.on('focus', function(e){\r\n            $.get(op.url, {\r\n                keywords: searchInput.val(),\r\n                no_click: true\r\n            }, function(data){\r\n                for (let key in data){\r\n                    if (!data.hasOwnProperty(key)) continue;\r\n\r\n                    let itemHtml = `<div class=\"item\" data-id=\"${data[key].id}\">\r\n                                        <div class=\"name\">${data[key].text}</div>\r\n                                        <div class=\"sub-categories\" id=\"sc-${data[key].id}\"></div>\r\n                                    </div>`;\r\n                    if (data[key].parent_id == 0) {\r\n                        suggest.append(itemHtml);\r\n                    } else {\r\n                        $('#sc-' + data[key].parent_id, suggest).append(itemHtml)\r\n                    }\r\n                }\r\n                suggest.show()\r\n            }, 'json')\r\n        });\r\n\r\n        searchInput.on('keyup', function(e){\r\n            let search = '('  + searchInput.val() + ')';\r\n            let re = new RegExp(search,\"gi\");\r\n\r\n            $('.item', suggest).each(function(){\r\n                let name = $('> .name', this);\r\n                let text = name.text().trim();\r\n                let serched = text.replace(re, '<span class=\"keyword\">$1</span>');\r\n                name.html(serched);\r\n                if (text.length !== serched.length) {\r\n                    $(this).show();\r\n                    $(this).parents('.item').show();\r\n                } else {\r\n                    $(this).hide()\r\n                }\r\n            })\r\n        });\r\n\r\n        suggest.on('click', op.suggestItem, function(e){\r\n            e.preventDefault();\r\n\r\n            searchInput.val($(op.itemTextBox, this).text());\r\n            suggest.hide().html('');\r\n\r\n            op.suggestItemClick(searchInput, $(this));\r\n            searchInput.trigger('suggestItemClick', [searchInput, $(this)]);\r\n\r\n            return false\r\n        });\r\n\r\n        searchInput.on('blur', function(){\r\n            setTimeout(function() {\r\n                suggest.hide();\r\n            }, 300);\r\n        })\r\n    })\r\n};\r\nexport default searchCategory;","let searchInfoPage = function(options){\r\n    let op = $.extend({\r\n        url: 'information_manager/all-list',\r\n        suggestWrapClass: 'search-category',\r\n        suggestClass: 'suggest',\r\n        suggestItem: '.item',\r\n        itemTextBox: '.name',\r\n        suggestItemClick: function(input, itemObj){},\r\n    },options);\r\n\r\n    return this.each(function() {\r\n\r\n        let searchInput = $(this);\r\n        let suggestWrap = $(`<div class=\"${op.suggestWrapClass}\"></div>`);\r\n        let suggest = $(`<div class=\"${op.suggestClass}\"></div>`);\r\n\r\n        searchInput.after(suggestWrap);\r\n        suggestWrap.append(suggest);\r\n        suggest.hide();\r\n\r\n        searchInput.on('focus', function(e){\r\n            e.preventDefault();\r\n\r\n            $.get(op.url, {\r\n                keywords: searchInput.val(),\r\n                no_click: true\r\n            }, function(data){\r\n                for (let key in data){\r\n                    if (!data.hasOwnProperty(key)) continue;\r\n\r\n                    let itemHtml = `<div class=\"item\" data-id=\"${data[key].id}\">\r\n                                        <div class=\"name\">${data[key].text}</div>\r\n                                    </div>`;\r\n                    suggest.append(itemHtml);\r\n                }\r\n                suggest.show()\r\n            }, 'json');\r\n\r\n            return false\r\n        });\r\n\r\n        searchInput.on('keyup', function(e){\r\n            let search = '('  + searchInput.val() + ')';\r\n            let re = new RegExp(search,\"gi\");\r\n\r\n            $('.item', suggest).each(function(){\r\n                let name = $('> .name', this);\r\n                let text = name.text().trim();\r\n                let serched = text.replace(re, '<span class=\"keyword\">$1</span>');\r\n                name.html(serched);\r\n                if (text.length !== serched.length) {\r\n                    $(this).show();\r\n                } else {\r\n                    $(this).hide()\r\n                }\r\n            })\r\n        });\r\n\r\n        suggest.on('click', op.suggestItem, function(e){\r\n            e.preventDefault();\r\n\r\n            searchInput.val($(op.itemTextBox, this).text());\r\n            suggest.hide().html('');\r\n\r\n            op.suggestItemClick(searchInput, $(this));\r\n            searchInput.trigger('suggestItemClick', [searchInput, $(this)]);\r\n\r\n            return false\r\n        });\r\n\r\n        searchInput.on('blur', function(){\r\n            setTimeout(function() {\r\n                suggest.hide();\r\n            }, 300);\r\n        })\r\n    })\r\n};\r\nexport default searchInfoPage;","let searchProduct = function(options){\r\n    let op = $.extend({\r\n        url: 'index/search-suggest',\r\n        suggestWrapClass: 'search-product',\r\n        suggestClass: 'suggest',\r\n        suggestItem: 'a',\r\n        itemTextBox: '.td_name',\r\n        suggestItemClick: function(input, itemObj){},\r\n    },options);\r\n\r\n    return this.each(function() {\r\n\r\n        let searchInput = $(this);\r\n        let suggestWrap = $(`<div class=\"${op.suggestWrapClass}\"></div>`);\r\n        let suggest = $(`<div class=\"${op.suggestClass}\"></div>`);\r\n\r\n        searchInput.after(suggestWrap);\r\n        suggestWrap.append(suggest);\r\n        suggest.hide();\r\n\r\n        searchInput.on('keyup', function(e){\r\n            $.get(op.url, {\r\n                keywords: searchInput.val(),\r\n                no_click: true\r\n            }, function(data){\r\n                suggest.show().html(data);\r\n            })\r\n        });\r\n\r\n        suggest.on('click', op.suggestItem, function(e){\r\n            e.preventDefault();\r\n\r\n            searchInput.val($(op.itemTextBox, this).text());\r\n            suggest.hide().html('');\r\n\r\n            op.suggestItemClick(searchInput, $(this));\r\n            searchInput.trigger('suggestItemClick', [searchInput, $(this)]);\r\n\r\n            return false\r\n        });\r\n\r\n        searchInput.on('blur', function(){\r\n            setTimeout(function() {\r\n                suggest.hide();\r\n            }, 300);\r\n        })\r\n    })\r\n};\r\nexport default searchProduct;","let tools = function() {\r\n    let toolsBar = $('.tools-bar');\r\n    let toolsBar2 = $('.container');\r\n    let toolsBarWrap = $('.tools-bar-wrap');\r\n    let topHeadingBar = $('.top_bead');\r\n\r\n    let limitTop = 0,\r\n        toolsBarMainPosition = {},\r\n        toolsBarMainWidth = 0;\r\n\r\n    let windowScroll = function () {\r\n\r\n        if (toolsBarMainPosition.top - limitTop <= $(window).scrollTop()) {\r\n            toolsBar.css({\r\n                'position': 'fixed',\r\n                'left': toolsBarMainPosition.left,\r\n                'top': limitTop,\r\n                'width': toolsBarMainWidth,\r\n                'z-index': 100\r\n            });\r\n            toolsBar.addClass('fixed-bar');\r\n        } else {\r\n            toolsBar.css({\r\n                'position': '',\r\n                'left': '',\r\n                'top': '',\r\n                'width': '',\r\n                'z-index': ''\r\n            });\r\n            toolsBar.removeClass('fixed-bar');\r\n        }\r\n\r\n    };\r\n\r\n    let windowResize = function(){\r\n        toolsBar.css({\r\n            'position': '',\r\n            'left': '',\r\n            'top': '',\r\n            'width': '',\r\n            'z-index': ''\r\n        });\r\n        toolsBar.removeClass('fixed-bar');\r\n\r\n        limitTop = toolsBar2.height() + topHeadingBar.height() + 1;\r\n        toolsBarMainPosition = toolsBar.offset();\r\n        toolsBarMainWidth = toolsBar.width();\r\n        toolsBarWrap.height(toolsBarWrap.height());\r\n\r\n        windowScroll();\r\n    };\r\n    windowResize();\r\n\r\n\r\n    $(window).on('scroll', windowScroll);\r\n    $(window).on('resize', windowResize)\r\n};\r\n\r\nexport default tools;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import style from \"./edit/style.scss\";\r\n\r\nimport uploadMainImage from \"./edit/upload-main-image\";\r\nimport saveMap from \"./edit/save\";\r\nimport imageMapCreator from \"./edit/image-map-creator\";\r\nimport toolsBar from \"src/tools-bar\";\r\n\r\n\r\n\r\n\r\nlet btnUploadImage = $('.upload-image');\r\nlet btnSave = $('.btn-save-boxes');\r\nlet mapImage = $('.map-image');\r\nlet form = $('.map-info');\r\nlet svg = $('#svg');\r\n\r\ntoolsBar();\r\n\r\nuploadMainImage({\r\n    image: mapImage,\r\n    button: btnUploadImage,\r\n    uploadUrl: 'image-maps/upload',\r\n    svg: svg\r\n});\r\n\r\nlet imageMap = imageMapCreator();\r\n\r\nsaveMap({\r\n    image: mapImage,\r\n    button: btnSave,\r\n    imageMap: imageMap,\r\n    form: form,\r\n    saveUrl: 'image-maps/save'\r\n});\r\n\r\n//show svg elements from saved data\r\n(function wait(){\r\n    if (!window.imageMapsData) {\r\n        setTimeout(wait, 500)\r\n    } else {\r\n        imageMap.fromJSON(imageMapsData.items);\r\n    }\r\n})()","import attributesPopup from \"./svg-element-attributs-popup\";\r\n\r\n/*\r\n * Summer html image map creator\r\n * http://github.com/summerstyle/summer\r\n *\r\n * Copyright 2016 Vera Lobacheva (http://iamvera.com)\r\n * Released under the MIT license\r\n */\r\n\r\nvar summerHtmlImageMapCreator = function() {\r\n    'use strict';\r\n\r\n    /* Utilities */\r\n    var utils = {\r\n        /**\r\n         * Returns offset from html page top-left corner for some element\r\n         *\r\n         * @param node {HTMLElement} - html element\r\n         * @returns {Object} - object with offsets, e.g. {x: 100, y: 200}\r\n         */\r\n        getOffset : function(node) {\r\n            var boxCoords = node.getBoundingClientRect();\r\n\r\n            return {\r\n                x : Math.round(boxCoords.left + window.pageXOffset),\r\n                y : Math.round(boxCoords.top + window.pageYOffset)\r\n            };\r\n        },\r\n\r\n        /**\r\n         * Returns correct coordinates (incl. offsets)\r\n         *\r\n         * @param x {number} - x-coordinate\r\n         * @param y {number} - y-coordinate\r\n         * @returns {Object} - object with recalculated coordinates, e.g. {x: 100, y: 200}\r\n         */\r\n        getRightCoords : function(x, y) {\r\n            return {\r\n                x : x - $('#image').offset().left,\r\n                y : y - $('#image').offset().top\r\n            };\r\n        },\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        id : function (str) {\r\n            return document.getElementById(str);\r\n        },\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        hide : function(node) {\r\n            node.style.display = 'none';\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        show : function(node) {\r\n            node.style.display = 'block';\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * Escape < and > (for code output)\r\n         *\r\n         * @param str {string} - a string with < and >\r\n         * @returns {string} - a string with escaped < and >\r\n         */\r\n        encode : function(str) {\r\n            return str.replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n        },\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        foreach : function(arr, func) {\r\n            for(var i = 0, count = arr.length; i < count; i++) {\r\n                func(arr[i], i);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        foreachReverse : function(arr, func) {\r\n            for(var i = arr.length - 1; i >= 0; i--) {\r\n                func(arr[i], i);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Display debug info to some block\r\n         */\r\n        debug : (function() {\r\n            var output = document.getElementById('debug');\r\n\r\n            return function() {\r\n                output.innerHTML = [].join.call(arguments, ' ');\r\n            };\r\n        })(),\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        stopEvent : function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n\r\n            return this;\r\n        },\r\n\r\n        /**\r\n         * TODO: will use same method of app.js\r\n         * @deprecated\r\n         */\r\n        extend : function(obj, options) {\r\n            var target = {};\r\n\r\n            for (var name in obj) {\r\n                if(obj.hasOwnProperty(name)) {\r\n                    target[name] = options[name] ? options[name] : obj[name];\r\n                }\r\n            }\r\n\r\n            return target;\r\n        },\r\n\r\n        inherits : (function() {\r\n            var F = function() {};\r\n\r\n            return function(Child, Parent) {\r\n                F.prototype = Parent.prototype;\r\n                Child.prototype = new F();\r\n                Child.prototype.constructor = Child;\r\n            };\r\n        })()\r\n    };\r\n\r\n\r\n    /* Main module - will be main module in app.js-based application */\r\n    var app = (function() {\r\n        var domElements = {\r\n                wrapper : utils.id('wrapper'),\r\n                svg : utils.id('svg'),\r\n                img : utils.id('img'),\r\n                container : utils.id('image'),\r\n                map : null\r\n            },\r\n            state = {\r\n                offset : {\r\n                    x : 0,\r\n                    y : 0\r\n                },\r\n                appMode : null, // drawing || editing || preview\r\n                currentType : null,\r\n                editType : null,\r\n                newArea : null,\r\n                selectedArea : null,\r\n                areas : [],\r\n                events : [],\r\n                isDraw : false,\r\n                image : {\r\n                    src : null,\r\n                    filename : null,\r\n                    width: 0,\r\n                    height: 0\r\n                }\r\n            },\r\n            KEYS = {\r\n                F1     : 112,\r\n                ESC    : 27,\r\n                TOP    : 38,\r\n                BOTTOM : 40,\r\n                LEFT   : 37,\r\n                RIGHT  : 39,\r\n                DELETE : 46,\r\n                I      : 73,\r\n                S      : 83,\r\n                C      : 67\r\n            };\r\n\r\n        function recalcOffsetValues() {\r\n            state.offset = utils.getOffset(domElements.container);\r\n        }\r\n\r\n        /* Get offset value */\r\n        window.addEventListener('resize', recalcOffsetValues, false);\r\n\r\n        /* Disable selection */\r\n        domElements.container.addEventListener('mousedown', function(e) { e.preventDefault(); }, false);\r\n\r\n        /* Disable image dragging */\r\n        domElements.img.addEventListener('dragstart', function(e){\r\n            e.preventDefault();\r\n        }, false);\r\n\r\n        /* Display cursor coordinates info */\r\n        var cursor_position_info = (function() {\r\n            var coords_info = utils.id('coords');\r\n\r\n            return {\r\n                set : function(coords) {\r\n                    coords_info.innerHTML = 'x: ' + coords.x + ', ' + 'y: ' + coords.y;\r\n                },\r\n                empty : function() {\r\n                    coords_info.innerHTML = '';\r\n                }\r\n            };\r\n        })();\r\n\r\n        domElements.container.addEventListener('mousemove', function(e){\r\n            cursor_position_info.set(utils.getRightCoords(e.pageX, e.pageY));\r\n        }, false);\r\n\r\n        domElements.container.addEventListener('mouseleave', function(){\r\n            cursor_position_info.empty();\r\n        }, false);\r\n\r\n        /* Add mousedown event for svg */\r\n        function onSvgMousedown(e) {\r\n            if (state.appMode === 'editing') {\r\n                if (e.target.parentNode.tagName === 'g') {\r\n                    info.unload();\r\n                    state.selectedArea = e.target.parentNode.obj;\r\n\r\n                    app.deselectAll();\r\n                    state.selectedArea.select();\r\n                    state.selectedArea.editingStartPoint = {\r\n                        x : e.pageX,\r\n                        y : e.pageY\r\n                    };\r\n\r\n                    if (e.target.classList.contains('helper')) {\r\n                        var helper = e.target;\r\n                        state.editType = helper.action;\r\n\r\n                        if (helper.n >= 0) { // if typeof selected_area == polygon\r\n                            state.selectedArea.selected_point = helper.n;\r\n                        }\r\n\r\n                        app.addEvent(app.domElements.container,\r\n                            'mousemove',\r\n                            state.selectedArea.onProcessEditing.bind(state.selectedArea))\r\n                            .addEvent(app.domElements.container,\r\n                                'mouseup',\r\n                                state.selectedArea.onStopEditing.bind(state.selectedArea));\r\n                    } else if (e.target.tagName === 'rect' || e.target.tagName === 'circle' || e.target.tagName === 'polygon') {\r\n                        state.editType = 'move';\r\n\r\n                        app.addEvent(app.domElements.container,\r\n                            'mousemove',\r\n                            state.selectedArea.onProcessEditing.bind(state.selectedArea))\r\n                            .addEvent(app.domElements.container,\r\n                                'mouseup',\r\n                                state.selectedArea.onStopEditing.bind(state.selectedArea));\r\n                    }\r\n                } else {\r\n                    app.deselectAll();\r\n                    info.unload();\r\n                }\r\n            }\r\n        }\r\n\r\n        domElements.container.addEventListener('mousedown', onSvgMousedown, false);\r\n\r\n        /* Add click event for svg */\r\n        function onSvgClick(e) {\r\n            if (state.appMode === 'drawing' && !state.isDraw && state.currentType) {\r\n                code.hide();\r\n                app.setIsDraw(true);\r\n\r\n                state.newArea = Area.CONSTRUCTORS[state.currentType].createAndStartDrawing(\r\n                    utils.getRightCoords(e.pageX, e.pageY)\r\n                );\r\n            }\r\n        }\r\n\r\n        domElements.container.addEventListener('click', onSvgClick, false);\r\n\r\n        /* Add dblclick event for svg */\r\n        function onAreaDblClick(e) {\r\n            if (state.appMode === 'editing') {\r\n                if (e.target.tagName === 'rect' || e.target.tagName === 'circle' || e.target.tagName === 'polygon') {\r\n                    state.selectedArea = e.target.parentNode.obj;\r\n                    info.load(state.selectedArea, e.pageX, e.pageY);\r\n                }\r\n            }\r\n        }\r\n\r\n        domElements.container.addEventListener('dblclick', onAreaDblClick, false);\r\n\r\n\r\n        /* Add keydown event for document */\r\n        function onDocumentKeyDown(e) {\r\n            var ctrlDown = e.ctrlKey || e.metaKey; // PC || Mac\r\n\r\n            switch (e.keyCode) {\r\n                case KEYS.F1:\r\n                    help.show();\r\n                    e.preventDefault();\r\n\r\n                    break;\r\n\r\n                case KEYS.ESC:\r\n                    help.hide();\r\n                    if (state.isDraw) {\r\n                        state.isDraw = false;\r\n                        state.newArea.remove();\r\n                        state.areas.pop();\r\n                        app.removeAllEvents();\r\n                    } else if (state.appMode === 'editing') {\r\n                        state.selectedArea.redraw();\r\n                        app.removeAllEvents();\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.TOP:\r\n                    if (state.appMode === 'editing' && state.selectedArea) {\r\n                        state.selectedArea.move(0, -1);\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.BOTTOM:\r\n                    if (state.appMode === 'editing' && state.selectedArea) {\r\n                        state.selectedArea.move(0, 1);\r\n                        e.preventDefault();\r\n                    }\r\n                    break;\r\n\r\n                case KEYS.LEFT:\r\n                    if (state.appMode === 'editing' && state.selectedArea) {\r\n                        state.selectedArea.move(-1, 0);\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.RIGHT:\r\n                    if (state.appMode === 'editing' && state.selectedArea) {\r\n                        state.selectedArea.move(1, 0);\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.DELETE:\r\n                    if (state.appMode === 'editing' && state.selectedArea) {\r\n                        app.removeObject(state.selectedArea);\r\n                        state.selectedArea = null;\r\n                        info.unload();\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.I:\r\n                    if (state.appMode === 'editing' && state.selectedArea) {\r\n                        var coordsForAttributesForm = state.selectedArea.getCoordsForDisplayingInfo();\r\n\r\n                        info.load(\r\n                            state.selectedArea,\r\n                            coordsForAttributesForm.x + app.getOffset('x'),\r\n                            coordsForAttributesForm.y + app.getOffset('y')\r\n                        );\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.S:\r\n                    if (ctrlDown) {\r\n                        app.saveInLocalStorage();\r\n                    }\r\n\r\n                    break;\r\n\r\n                case KEYS.C:\r\n                    if (state.appMode === 'editing' && state.selectedArea && ctrlDown) {\r\n                        state.selectedArea = Area.copy(state.selectedArea);\r\n                    }\r\n\r\n                    break;\r\n            }\r\n        }\r\n\r\n        document.addEventListener('keydown', onDocumentKeyDown, false);\r\n\r\n        // Will moved from the main module\r\n        var areasIO = {\r\n            toJSON : function() {\r\n                var obj = {\r\n                    areas : [],\r\n                    img : state.image.src\r\n                };\r\n\r\n                utils.foreach(state.areas, function(x) {\r\n                    obj.areas.push(x.toJSON());\r\n                });\r\n\r\n                return JSON.stringify(obj);\r\n            },\r\n            fromJSON : function(str) {\r\n                var obj = JSON.parse(str);\r\n\r\n                utils.foreach(obj.areas, function(areaParams) {\r\n                    Area.fromJSON(areaParams);\r\n                });\r\n            }\r\n        };\r\n\r\n        // Will moved from the main module\r\n        var localStorageWrapper = (function() {\r\n            var KEY_NAME = 'ImageMap';\r\n\r\n            return {\r\n                save : function() {\r\n                    var result = areasIO.toJSON();\r\n                    window.localStorage.setItem(KEY_NAME, result);\r\n                    console.info('Editor ' + result + ' saved');\r\n\r\n                    alert('Saved');\r\n                },\r\n                restore : function() {\r\n                    areasIO.fromJSON(window.localStorage.getItem(KEY_NAME));\r\n                }\r\n            };\r\n        })();\r\n\r\n        return {\r\n            toJSON : function() {\r\n                var obj = {\r\n                    areas : [],\r\n                    img : state.image.src\r\n                };\r\n\r\n                utils.foreach(state.areas, function(x) {\r\n                    obj.areas.push(x.toJSON());\r\n                });\r\n\r\n                return JSON.stringify(obj);\r\n            },\r\n            domElements : domElements,\r\n            saveInLocalStorage : localStorageWrapper.save,\r\n            loadFromLocalStorage : localStorageWrapper.restore,\r\n            hide : function() {\r\n                //utils.hide(domElements.container);\r\n                return this;\r\n            },\r\n            show : function() {\r\n                //utils.show(domElements.container);\r\n                return this;\r\n            },\r\n            recalcOffsetValues: function() {\r\n                recalcOffsetValues();\r\n                return this;\r\n            },\r\n            setDimensions : function(width, height) {\r\n                domElements.svg.setAttribute('width', width);\r\n                domElements.svg.setAttribute('height', height);\r\n                domElements.container.style.width = width + 'px';\r\n                domElements.container.style.height = height + 'px';\r\n                return this;\r\n            },\r\n            preview : (function() {\r\n                domElements.img.setAttribute('usemap', '#map');\r\n                domElements.map = document.createElement('map');\r\n                domElements.map.setAttribute('name', 'map');\r\n                domElements.container.appendChild(domElements.map);\r\n\r\n                return function() {\r\n                    info.unload();\r\n                    app.setShape(null);\r\n                    utils.hide(domElements.svg);\r\n                    domElements.map.innerHTML = app.getHTMLCode();\r\n                    code.print();\r\n                    return this;\r\n                };\r\n            })(),\r\n            hidePreview : function() {\r\n                utils.show(domElements.svg);\r\n                domElements.map.innerHTML = '';\r\n                return this;\r\n            },\r\n            addNodeToSvg : function(node) {\r\n                domElements.svg.appendChild(node);\r\n                return this;\r\n            },\r\n            removeNodeFromSvg : function(node) {\r\n                domElements.svg.removeChild(node);\r\n                return this;\r\n            },\r\n            getOffset : function(arg) {\r\n                switch(arg) {\r\n                    case 'x':\r\n                    case 'y':\r\n                        return state.offset[arg];\r\n                }\r\n            },\r\n            clear : function(){\r\n                //remove all areas\r\n                state.areas.length = 0;\r\n                while(domElements.svg.childNodes[0]) {\r\n                    domElements.svg.removeChild(domElements.svg.childNodes[0]);\r\n                }\r\n                code.hide();\r\n                info.unload();\r\n                return this;\r\n            },\r\n            removeObject : function(obj) {\r\n                utils.foreach(state.areas, function(x, i) {\r\n                    if(x === obj) {\r\n                        state.areas.splice(i, 1);\r\n                    }\r\n                });\r\n                obj.remove();\r\n                return this;\r\n            },\r\n            deselectAll : function() {\r\n                utils.foreach(state.areas, function(x) {\r\n                    x.deselect();\r\n                });\r\n                return this;\r\n            },\r\n            getIsDraw : function() {\r\n                return state.isDraw;\r\n            },\r\n            setIsDraw : function(arg) {\r\n                state.isDraw = arg;\r\n                return this;\r\n            },\r\n            setMode : function(arg) {\r\n                state.appMode = arg;\r\n                return this;\r\n            },\r\n            getMode : function() {\r\n                return state.appMode;\r\n            },\r\n            setShape : function(arg) {\r\n                state.currentType = arg;\r\n                return this;\r\n            },\r\n            getShape : function() {\r\n                return state.currentType;\r\n            },\r\n            addObject : function(object) {\r\n                state.areas.push(object);\r\n                return this;\r\n            },\r\n            getNewArea : function() {\r\n                return state.newArea;\r\n            },\r\n            resetNewArea : function() {\r\n                state.newArea = null;\r\n                return this;\r\n            },\r\n            getSelectedArea : function() {\r\n                return state.selectedArea;\r\n            },\r\n            setSelectedArea : function(obj) {\r\n                state.selectedArea = obj;\r\n                return this;\r\n            },\r\n            getEditType : function() {\r\n                return state.editType;\r\n            },\r\n            setFilename : function(str) {\r\n                state.image.filename = str;\r\n                return this;\r\n            },\r\n            setEditClass : function() {\r\n                domElements.container.classList.remove('draw');\r\n                domElements.container.classList.add('edit');\r\n\r\n                return this;\r\n            },\r\n            setDrawClass : function() {\r\n                domElements.container.classList.remove('edit');\r\n                domElements.container.classList.add('draw');\r\n\r\n                return this;\r\n            },\r\n            setDefaultClass : function() {\r\n                domElements.container.classList.remove('edit');\r\n                domElements.container.classList.remove('draw');\r\n\r\n                return this;\r\n            },\r\n            addEvent : function(target, eventType, func) {\r\n                state.events.push(new AppEvent(target, eventType, func));\r\n                return this;\r\n            },\r\n            removeAllEvents : function() {\r\n                utils.foreach(state.events, function(x) {\r\n                    x.remove();\r\n                });\r\n                state.events.length = 0;\r\n                return this;\r\n            },\r\n            getHTMLCode : function(arg) {\r\n                var html_code = '';\r\n                if (arg) {\r\n                    if (!state.areas.length) {\r\n                        return '0 objects';\r\n                    }\r\n                    html_code += utils.encode('<img src=\"' + state.image.filename + '\" alt=\"\" usemap=\"#map\" />') +\r\n                        '<br />' + utils.encode('<map name=\"map\">') + '<br />';\r\n                    utils.foreachReverse(state.areas, function(x) {\r\n                        html_code += '&nbsp;&nbsp;&nbsp;&nbsp;' + utils.encode(x.toHTMLMapElementString()) + '<br />';\r\n                    });\r\n                    html_code += utils.encode('</map>');\r\n                } else {\r\n                    utils.foreachReverse(state.areas, function(x) {\r\n                        html_code += x.toHTMLMapElementString();\r\n                    });\r\n                }\r\n                return html_code;\r\n            }\r\n        };\r\n    })();\r\n\r\n\r\n    /**\r\n     * The constructor for dom events (for simple deleting of event)\r\n     *\r\n     * @constructor\r\n     * @param {DOMElement} target - DOM-element\r\n     * @param {String} eventType - e.g. 'click' or 'mousemove'\r\n     * @param {Function} func - handler for this event\r\n     */\r\n    function AppEvent(target, eventType, func) {\r\n        this.target = target;\r\n        this.eventType = eventType;\r\n        this.func = func;\r\n\r\n        target.addEventListener(eventType, func, false);\r\n    }\r\n\r\n    /**\r\n     * Remove this event listener from target\r\n     */\r\n    AppEvent.prototype.remove = function() {\r\n        this.target.removeEventListener(this.eventType, this.func, false);\r\n    };\r\n\r\n\r\n    /**\r\n     * The constructor of helpers points\r\n     * Helper is small svg-rectangle with some actions\r\n     *\r\n     * @constructor\r\n     * @param node {DOMElement} - a node for inserting helper\r\n     * @param x {number} - x-coordinate of helper\r\n     * @param y {number} - y-coordinate of helper\r\n     * @param action {string} - an action by click of this helper (e.g. 'move')\r\n     */\r\n    function Helper(node, x, y, action) {\r\n        this._el = document.createElementNS(Area.SVG_NS, 'rect');\r\n\r\n        this._el.classList.add(Helper.CLASS_NAME);\r\n        this._el.setAttribute('height', Helper.SIZE);\r\n        this._el.setAttribute('width', Helper.SIZE);\r\n        this._el.setAttribute('x', x + Helper.OFFSET);\r\n        this._el.setAttribute('y', y + Helper.OFFSET);\r\n\r\n        node.appendChild(this._el);\r\n\r\n        this._el.action = action; // TODO: move 'action' from dom el to data-attr\r\n        this._el.classList.add(Helper.ACTIONS_TO_CURSORS[action]);\r\n    }\r\n\r\n    Helper.SIZE = 5;\r\n    Helper.OFFSET = -Math.ceil(Helper.SIZE / 2);\r\n    Helper.CLASS_NAME = 'helper';\r\n    Helper.ACTIONS_TO_CURSORS = {\r\n        'move'            : 'move',\r\n        'editLeft'        : 'e-resize',\r\n        'editRight'       : 'w-resize',\r\n        'editTop'         : 'n-resize',\r\n        'editBottom'      : 's-resize',\r\n        'editTopLeft'     : 'nw-resize',\r\n        'editTopRight'    : 'ne-resize',\r\n        'editBottomLeft'  : 'sw-resize',\r\n        'editBottomRight' : 'se-resize',\r\n        'movePoint'       : 'pointer'\r\n    };\r\n\r\n    /**\r\n     * Set coordinates for this helper\r\n     *\r\n     * @param x {number} - x-coordinate\r\n     * @param y {number} - y-coordinate\r\n     * @returns {Helper}\r\n     */\r\n    Helper.prototype.setCoords = function(x, y) {\r\n        this._el.setAttribute('x', x + Helper.OFFSET);\r\n        this._el.setAttribute('y', y + Helper.OFFSET);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Set id of this helper in list of parent's helpers\r\n     *\r\n     * @param id {number}\r\n     * @returns {Helper}\r\n     */\r\n    Helper.prototype.setId = function(id) {\r\n        // TODO: move n-field from DOM-element to data-attribute\r\n        this._el.n = id;\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * The abstract constructor for area\r\n     *\r\n     * @constructor\r\n     * @abstract\r\n     * @param type {string} - type of area ('rectangle', 'circle' or 'polygon')\r\n     * @param coords {Object} - coordinates of area (e.g. x, y, width, height)\r\n     * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title)\r\n     */\r\n    function Area(type, coords, attributes) {\r\n        if (this.constructor === Area) {\r\n            throw new Error('This is abstract class');\r\n        }\r\n\r\n        this._type = type;\r\n\r\n        /**\r\n         * @namespace\r\n         * @property href {string} - href-attribute of area\r\n         * @property alt {string} - alt-attribute of area\r\n         * @property title {string} - title-attribute of area\r\n         */\r\n        this._attributes = {\r\n        };\r\n\r\n        if (attributes) {\r\n            this.setInfoAttributes(attributes);\r\n        }\r\n\r\n        this._coords = coords;\r\n\r\n        // the g-element, it contains this area and helpers elements\r\n        this._groupEl = document.createElementNS(Area.SVG_NS, 'g');\r\n        app.addNodeToSvg(this._groupEl);\r\n\r\n        // TODO: remove this field from DOM-element\r\n        // Link to parent object\r\n        this._groupEl.obj = this;\r\n\r\n        // svg-dom-element of area\r\n        this._el = null;\r\n\r\n        // Object with all helpers of area\r\n        this._helpers = {};\r\n\r\n        // Add this new area to list of all areas\r\n        app.addObject(this);\r\n    }\r\n    Area.SVG_NS = 'http://www.w3.org/2000/svg'; // TODO: move to main editor constructor\r\n    Area.CLASS_NAMES = {\r\n        SELECTED : 'selected',\r\n        WITH_HREF : 'with_href'\r\n    };\r\n    Area.CONSTRUCTORS = {\r\n        rectangle : Rectangle,\r\n        circle : Circle,\r\n        polygon : Polygon\r\n    };\r\n    Area.REGEXP = {\r\n        AREA : /<area(?=.*? shape=\"(rect|circle|poly)\")(?=.*? coords=\"([\\d ,]+?)\")[\\s\\S]*?>/gmi,\r\n        HREF : / href=\"([\\S\\s]+?)\"/,\r\n        ALT : / alt=\"([\\S\\s]+?)\"/,\r\n        TITLE : / title=\"([\\S\\s]+?)\"/,\r\n        DELIMETER : / ?, ?/\r\n    };\r\n    Area.HTML_NAMES_TO_AREA_NAMES = {\r\n        rect : 'rectangle',\r\n        circle : 'circle',\r\n        poly : 'polygon'\r\n    };\r\n    Area.ATTRIBUTES_NAMES = ['HREF', 'ALT', 'TITLE'];\r\n\r\n    /**\r\n     * This method should be implemented for child-classes\r\n     *\r\n     * @throws {AbstractMethodCall}\r\n     */\r\n    Area.prototype.ABSTRACT_METHOD = function() {\r\n        throw new Error('This is abstract method');\r\n    };\r\n\r\n    /**\r\n     * All these methods are abstract\r\n     *\r\n     * @throws {AbstractMethodCall}\r\n     */\r\n    Area.prototype.setSVGCoords =\r\n        Area.prototype.setCoords =\r\n            Area.prototype.dynamicDraw =\r\n                Area.prototype.onProcessDrawing =\r\n                    Area.prototype.onStopDrawing =\r\n                        Area.prototype.edit =\r\n                            Area.prototype.dynamicEdit =\r\n                                Area.prototype.onProcessEditing =\r\n                                    Area.prototype.onStopEditing =\r\n                                        Area.prototype.toString =\r\n                                            Area.prototype.toHTMLMapElementString =\r\n                                                Area.prototype.getCoordsForDisplayingInfo =\r\n                                                    Area.prototype.ABSTRACT_METHOD;\r\n\r\n    /**\r\n     * Redraw this area with own or custom coordinates\r\n     *\r\n     * @param coords {Object} [coords=undefined]\r\n     * @returns {Area} - this area\r\n     */\r\n    Area.prototype.redraw = function(coords) {\r\n        this.setSVGCoords(coords ? coords : this._coords);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Remove this area from DOM-tree\r\n     */\r\n    Area.prototype.remove = function() {\r\n        app.removeNodeFromSvg(this._groupEl);\r\n    };\r\n\r\n    /**\r\n     * Move this area by dx, dy\r\n     *\r\n     * @returns {Area} - this area\r\n     */\r\n    Area.prototype.move = function(dx, dy) {\r\n        this.setCoords(this.edit('move', dx, dy)).redraw();\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Add class name for selected areas to this area\r\n     *\r\n     * @returns {Area} - this area\r\n     */\r\n    Area.prototype.select = function() {\r\n        this._el.classList.add(Area.CLASS_NAMES.SELECTED);\r\n        console.info(this.toString() + ' is selected now');\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Remove class name for selected areas from this area\r\n     *\r\n     * @returns {Area} - this area\r\n     */\r\n    Area.prototype.deselect = function() {\r\n        this._el.classList.remove(Area.CLASS_NAMES.SELECTED);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Set style of element with href attribute for this area\r\n     *\r\n     * @returns {Area} - this area\r\n     */\r\n    Area.prototype.setStyleOfElementWithHref = function() {\r\n        this._el.classList.add(Area.CLASS_NAMES.WITH_HREF);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Unset style of element with href attribute for this area\r\n     *\r\n     * @returns {Area} - this area\r\n     */\r\n    Area.prototype.unsetStyleOfElementWithHref = function() {\r\n        this._el.classList.remove(Area.CLASS_NAMES.WITH_HREF);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Set attributes (href, alt and title) for this area\r\n     *\r\n     * @param attributes {Object} - Object with attributes for area\r\n     */\r\n    Area.prototype.setInfoAttributes = function(attributes) {\r\n        $.each(attributes, (key, attr) => {\r\n            this._attributes[key] = attr;\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Returns json-representation of this area\r\n     *\r\n     * @returns {Object}\r\n     */\r\n    Area.prototype.toJSON = function() {\r\n        /**\r\n         * @namespace\r\n         * @property type {string} - type of this area (e.g. 'rectangle', 'circle')\r\n         * @property coords {Object} - coordinates of this area (e.g. 'x', 'width')\r\n         * @property attributes {Object} - attributes of this area (e.g. 'href', 'title')\r\n         */\r\n        return {\r\n            type : this._type,\r\n            coords : this._coords,\r\n            attributes : this._attributes\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Returns new area object created with params from json-object\r\n     *\r\n     * @static\r\n     * @param params {Object} - params of area, incl. type, coords and attributes\r\n     * @returns {Rectangle|Circle|Polygon}\r\n     */\r\n    Area.fromJSON = function(params) {\r\n        var AreaConstructor = Area.CONSTRUCTORS[params.type];\r\n\r\n        if (!AreaConstructor) {\r\n            throw new Error('This area type is not valid');\r\n        }\r\n\r\n        if (!AreaConstructor.testCoords(params.coords)) {\r\n            throw new Error('This coords is not valid for ' + params.type);\r\n        }\r\n\r\n        app.setIsDraw(true);\r\n\r\n        var area = new AreaConstructor(params.coords, params.attributes);\r\n\r\n        app.setIsDraw(false)\r\n            .resetNewArea();\r\n\r\n        return area;\r\n    };\r\n\r\n    /**\r\n     * Creates new areas from html-string with <area /> elements\r\n     *\r\n     * @param htmlStr {string}\r\n     * @returns {Array} - array with areas\r\n     */\r\n    Area.createAreasFromHTMLOfMap = function(htmlStr) {\r\n        if (!htmlStr) {\r\n            return false;\r\n        }\r\n\r\n        while (true) {\r\n            var findedResult = Area.REGEXP.AREA.exec(htmlStr); // <area shape=\"$1\" coords=\"$2\" ... />\r\n            if (!findedResult) {\r\n                break;\r\n            }\r\n\r\n            var htmlAreaFinded = findedResult[0], // <area shape=\"...\" coords=\"...\" ... />\r\n                type = findedResult[1], // $1\r\n                coords = findedResult[2].split(Area.REGEXP.DELIMETER), // $2\r\n                attributes = {};\r\n\r\n            Area.ATTRIBUTES_NAMES.forEach(function(item, i) {\r\n                var result = Area.REGEXP[item].exec(htmlAreaFinded);\r\n\r\n                if (result) {\r\n                    attributes[name] = result[1];\r\n                }\r\n            });\r\n\r\n            coords = coords.map(function(item) {\r\n                return Number(item);\r\n            });\r\n\r\n            type = Area.HTML_NAMES_TO_AREA_NAMES[type];\r\n\r\n            Area.fromJSON({\r\n                type : type,\r\n                coords : Area.CONSTRUCTORS[type].getCoordsFromHTMLArray(coords),\r\n                attributes : attributes\r\n            });\r\n\r\n        }\r\n\r\n        return Boolean(htmlAreaFinded);\r\n    };\r\n\r\n    /**\r\n     * Returns copy of original area, selected and moved by (10,10) from it\r\n     *\r\n     * @param originalArea {Area}\r\n     * @returns {Area} - a copy of original area\r\n     */\r\n    Area.copy = function(originalArea) {\r\n        return Area.fromJSON(originalArea.toJSON()).move(10, 10).select();\r\n    };\r\n\r\n    /* ---------- Constructors for real areas ---------- */\r\n\r\n    /**\r\n     * The constructor for rectangles\r\n     *\r\n     * (x, y) -----\r\n     * |          | height\r\n     * ------------\r\n     *     width\r\n     *\r\n     * @constructor\r\n     * @param coords {Object} - object with parameters of new area (x, y, width, height)\r\n     *                          if some parameter is undefined, it will set 0\r\n     * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title)\r\n     */\r\n    function Rectangle(coords, attributes) {\r\n        Area.call(this, 'rectangle', coords, attributes);\r\n\r\n        /**\r\n         * @namespace\r\n         * @property {number} x - Distance from the left edge of the image to the left side of the rectangle\r\n         * @property {number} y - Distance from the top edge of the image to the top side of the rectangle\r\n         * @property {number} width - Width of rectangle\r\n         * @property {number} height - Height of rectangle\r\n         */\r\n        this._coords = {\r\n            x : coords.x || 0,\r\n            y : coords.y || 0,\r\n            width : coords.width || 0,\r\n            height : coords.height || 0\r\n        };\r\n\r\n        this._el = document.createElementNS(Area.SVG_NS, 'rect');\r\n        this._groupEl.appendChild(this._el);\r\n\r\n        var x = coords.x - this._coords.width / 2,\r\n            y = coords.y - this._coords.height / 2;\r\n\r\n        this._helpers = {\r\n            center : new Helper(this._groupEl, x, y, 'move'),\r\n            top : new Helper(this._groupEl, x, y, 'editTop'),\r\n            bottom : new Helper(this._groupEl, x, y, 'editBottom'),\r\n            left : new Helper(this._groupEl, x, y, 'editLeft'),\r\n            right : new Helper(this._groupEl, x, y, 'editRight'),\r\n            topLeft : new Helper(this._groupEl, x, y, 'editTopLeft'),\r\n            topRight : new Helper(this._groupEl, x, y, 'editTopRight'),\r\n            bottomLeft : new Helper(this._groupEl, x, y, 'editBottomLeft'),\r\n            bottomRight : new Helper(this._groupEl, x, y, 'editBottomRight')\r\n        };\r\n\r\n        this.redraw();\r\n    }\r\n    utils.inherits(Rectangle, Area);\r\n\r\n    /**\r\n     * Set attributes for svg-elements of area by new parameters\r\n     *\r\n     * -----top------\r\n     * |            |\r\n     * ---center_y---\r\n     * |            |\r\n     * ----bottom----\r\n     *\r\n     * @param coords {Object} - Object with coords of this area (x, y, width, height)\r\n     * @returns {Rectangle} - this rectangle\r\n     */\r\n    Rectangle.prototype.setSVGCoords = function(coords) {\r\n        this._el.setAttribute('x', coords.x);\r\n        this._el.setAttribute('y', coords.y);\r\n        this._el.setAttribute('width', coords.width);\r\n        this._el.setAttribute('height', coords.height);\r\n\r\n        var top = coords.y,\r\n            center_y = coords.y + coords.height / 2,\r\n            bottom = coords.y + coords.height,\r\n            left = coords.x,\r\n            center_x = coords.x + coords.width / 2,\r\n            right = coords.x + coords.width;\r\n\r\n        this._helpers.center.setCoords(center_x, center_y);\r\n        this._helpers.top.setCoords(center_x, top);\r\n        this._helpers.bottom.setCoords(center_x, bottom);\r\n        this._helpers.left.setCoords(left, center_y);\r\n        this._helpers.right.setCoords(right, center_y);\r\n        this._helpers.topLeft.setCoords(left, top);\r\n        this._helpers.topRight.setCoords(right, top);\r\n        this._helpers.bottomLeft.setCoords(left, bottom);\r\n        this._helpers.bottomRight.setCoords(right, bottom);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Set coords for this area\r\n     *\r\n     * @param coords {coords}\r\n     * @returns {Rectangle} - this rectangle\r\n     */\r\n    Rectangle.prototype.setCoords = function(coords) {\r\n        this._coords.x = coords.x;\r\n        this._coords.y = coords.y;\r\n        this._coords.width = coords.width;\r\n        this._coords.height = coords.height;\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Calculates new coordinates in process of drawing\r\n     *\r\n     * @param x {number} - x-coordinate of cursor\r\n     * @param y {number} - y-coordinate of cursor\r\n     * @param isSquare {boolean}\r\n     * @returns {Object} - calculated coords of this area\r\n     */\r\n    Rectangle.prototype.dynamicDraw = function(x, y, isSquare) {\r\n        var newCoords = {\r\n            x : this._coords.x,\r\n            y : this._coords.y,\r\n            width : x - this._coords.x,\r\n            height: y - this._coords.y\r\n        };\r\n\r\n        if (isSquare) {\r\n            newCoords = Rectangle.getSquareCoords(newCoords);\r\n        }\r\n\r\n        newCoords = Rectangle.getNormalizedCoords(newCoords);\r\n\r\n        this.redraw(newCoords);\r\n\r\n        return newCoords;\r\n    };\r\n\r\n    /**\r\n     * Handler for drawing process (by mousemove)\r\n     * It includes only redrawing area by new coords\r\n     * (this coords doesn't save as own area coords)\r\n     *\r\n     * @params e {MouseEvent} - mousemove event\r\n     */\r\n    Rectangle.prototype.onProcessDrawing = function(e) {\r\n        var coords = utils.getRightCoords(e.pageX, e.pageY);\r\n\r\n        this.dynamicDraw(coords.x, coords.y, e.shiftKey);\r\n    };\r\n\r\n    /**\r\n     * Handler for drawing stoping (by second click on drawing canvas)\r\n     * It includes redrawing area by new coords\r\n     * and saving this coords as own area coords\r\n     *\r\n     * @params e {MouseEvent} - click event\r\n     */\r\n    Rectangle.prototype.onStopDrawing = function(e) {\r\n        var coords = utils.getRightCoords(e.pageX, e.pageY);\r\n\r\n        this.setCoords(this.dynamicDraw(coords.x, coords.y, e.shiftKey)).deselect();\r\n\r\n        app.removeAllEvents()\r\n            .setIsDraw(false)\r\n            .resetNewArea();\r\n    };\r\n\r\n    /**\r\n     * Changes area parameters by editing type and offsets\r\n     *\r\n     * @param {string} editingType - A type of editing (e.g. 'move')\r\n     * @returns {Object} - Object with changed parameters of area\r\n     */\r\n    Rectangle.prototype.edit = function(editingType, dx, dy) {\r\n        var tempParams = Object.create(this._coords);\r\n\r\n        switch (editingType) {\r\n            case 'move':\r\n                tempParams.x += dx;\r\n                tempParams.y += dy;\r\n                break;\r\n\r\n            case 'editLeft':\r\n                tempParams.x += dx;\r\n                tempParams.width -= dx;\r\n                break;\r\n\r\n            case 'editRight':\r\n                tempParams.width += dx;\r\n                break;\r\n\r\n            case 'editTop':\r\n                tempParams.y += dy;\r\n                tempParams.height -= dy;\r\n                break;\r\n\r\n            case 'editBottom':\r\n                tempParams.height += dy;\r\n                break;\r\n\r\n            case 'editTopLeft':\r\n                tempParams.x += dx;\r\n                tempParams.y += dy;\r\n                tempParams.width -= dx;\r\n                tempParams.height -= dy;\r\n                break;\r\n\r\n            case 'editTopRight':\r\n                tempParams.y += dy;\r\n                tempParams.width += dx;\r\n                tempParams.height -= dy;\r\n                break;\r\n\r\n            case 'editBottomLeft':\r\n                tempParams.x += dx;\r\n                tempParams.width -= dx;\r\n                tempParams.height += dy;\r\n                break;\r\n\r\n            case 'editBottomRight':\r\n                tempParams.width += dx;\r\n                tempParams.height += dy;\r\n                break;\r\n        }\r\n\r\n        return tempParams;\r\n    };\r\n\r\n    /**\r\n     * Calculates new coordinates in process of editing\r\n     *\r\n     * @param coords {Object} - area coords\r\n     * @param saveProportions {boolean}\r\n     * @returns {Object} - new coordinates of area\r\n     */\r\n    Rectangle.prototype.dynamicEdit = function(coords, saveProportions) {\r\n        coords = Rectangle.getNormalizedCoords(coords);\r\n\r\n        if (saveProportions) {\r\n            coords = Rectangle.getSavedProportionsCoords(coords);\r\n        }\r\n\r\n        this.redraw(coords);\r\n\r\n        return coords;\r\n    };\r\n\r\n    /**\r\n     * Handler for editing process (by mousemove)\r\n     * It includes only redrawing area by new coords\r\n     * (this coords doesn't save as own area coords)\r\n     *\r\n     * @params e {MouseEvent} - mousemove event\r\n     */\r\n    Rectangle.prototype.onProcessEditing = function(e) {\r\n        return this.dynamicEdit(\r\n            this.edit(\r\n                app.getEditType(),\r\n                e.pageX - this.editingStartPoint.x,\r\n                e.pageY - this.editingStartPoint.y\r\n            ),\r\n            e.shiftKey\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Handler for editing stoping (by mouseup)\r\n     * It includes redrawing area by new coords\r\n     * and saving this coords as own area coords\r\n     *\r\n     * @params e {MouseEvent} - mouseup event\r\n     */\r\n    Rectangle.prototype.onStopEditing = function(e) {\r\n        this.setCoords(this.onProcessEditing(e));\r\n        app.removeAllEvents();\r\n    };\r\n\r\n    /**\r\n     * Returns string-representation of this rectangle\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Rectangle.prototype.toString = function() {\r\n        return 'Rectangle {x: '+ this._coords.x +\r\n            ', y: ' + this._coords.y +\r\n            ', width: ' + this._coords.width +\r\n            ', height: ' + this._coords.height + '}';\r\n    }\r\n\r\n    /**\r\n     * Returns html-string of area html element with params of this rectangle\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Rectangle.prototype.toHTMLMapElementString = function() {\r\n        var x2 = this._coords.x + this._coords.width,\r\n            y2 = this._coords.y + this._coords.height;\r\n\r\n        return '<area shape=\"rect\" coords=\"' // TODO: use template engine\r\n            + this._coords.x + ', '\r\n            + this._coords.y + ', '\r\n            + x2 + ', '\r\n            + y2\r\n            + '\"'\r\n            + (this._attributes.href ? ' href=\"' + this._attributes.href + '\"' : '')\r\n            + (this._attributes.alt ? ' alt=\"' + this._attributes.alt + '\"' : '')\r\n            + (this._attributes.title ? ' title=\"' + this._attributes.title + '\"' : '')\r\n            + ' />';\r\n    };\r\n\r\n    /**\r\n     * Returns coords for area attributes form\r\n     *\r\n     * @returns {Object} - object width coordinates of point\r\n     */\r\n    Rectangle.prototype.getCoordsForDisplayingInfo = function() {\r\n        return {\r\n            x : this._coords.x,\r\n            y : this._coords.y\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Returns true if coords is valid for rectangles and false otherwise\r\n     *\r\n     * @static\r\n     * @param coords {Object} - object with coords for new rectangle\r\n     * @return {boolean}\r\n     */\r\n    Rectangle.testCoords = function(coords) {\r\n        return coords.x && coords.y && coords.width && coords.height;\r\n    };\r\n\r\n    /**\r\n     * Returns true if html coords array is valid for rectangles and false otherwise\r\n     *\r\n     * @static\r\n     * @param coords {Array} - coords for new rectangle as array\r\n     * @return {boolean}\r\n     */\r\n    Rectangle.testHTMLCoords = function(coords) {\r\n        return coords.length === 4;\r\n    };\r\n\r\n    /**\r\n     * Return rectangle coords object from html array\r\n     *\r\n     * @param htmlCoordsArray {Array}\r\n     * @returns {Object}\r\n     */\r\n    Rectangle.getCoordsFromHTMLArray = function(htmlCoordsArray) {\r\n        if (!Rectangle.testHTMLCoords(htmlCoordsArray)) {\r\n            throw new Error('This html-coordinates is not valid for rectangle');\r\n        }\r\n\r\n        return {\r\n            x : htmlCoordsArray[0],\r\n            y : htmlCoordsArray[1],\r\n            width : htmlCoordsArray[2] - htmlCoordsArray[0],\r\n            height : htmlCoordsArray[3] - htmlCoordsArray[1]\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Fixes coords if width or/and height are negative\r\n     *\r\n     * @static\r\n     * @param coords {Object} - Coordinates of this area\r\n     * @returns {Object} - Normalized coordinates of area\r\n     */\r\n    Rectangle.getNormalizedCoords = function(coords) {\r\n        if (coords.width < 0) {\r\n            coords.x += coords.width;\r\n            coords.width = Math.abs(coords.width);\r\n        }\r\n\r\n        if (coords.height < 0) {\r\n            coords.y += coords.height;\r\n            coords.height = Math.abs(coords.height);\r\n        }\r\n\r\n        return coords;\r\n    };\r\n\r\n    /**\r\n     * Returns coords with equivivalent width and height\r\n     *\r\n     * @static\r\n     * @param coords {Object} - Coordinates of this area\r\n     * @returns {Object} - Coordinates of area with equivivalent width and height\r\n     */\r\n    Rectangle.getSquareCoords = function(coords) {\r\n        var width = Math.abs(coords.width),\r\n            height = Math.abs(coords.height);\r\n\r\n        if (width > height) {\r\n            coords.width = coords.width > 0 ? height : -height;\r\n        } else {\r\n            coords.height = coords.height > 0 ? width : -width;\r\n        }\r\n\r\n        return coords;\r\n    };\r\n\r\n    /**\r\n     * Returns coords with saved proportions of original area\r\n     *\r\n     * @static\r\n     * @param coords {Object} - Coordinates of this area\r\n     * @param originalCoords {Object} - Coordinates of the original area\r\n     * @returns {Object} - Coordinates of area with saved proportions of original area\r\n     */\r\n    Rectangle.getSavedProportionsCoords = function(coords, originalCoords) {\r\n        var originalProportions = coords.width / coords.height,\r\n            currentProportions = originalCoords.width / originalCoords.height;\r\n\r\n        if (currentProportions > originalProportions) {\r\n            coords.width = Math.round(coords.height * originalProportions);\r\n        } else {\r\n            coords.height = Math.round(coords.width / originalProportions);\r\n        }\r\n\r\n        return coords;\r\n    };\r\n\r\n    /**\r\n     * Creates new rectangle and adds drawing handlers for DOM-elements\r\n     *\r\n     * @static\r\n     * @param firstPointCoords {Object}\r\n     * @returns {Rectangle}\r\n     */\r\n    Rectangle.createAndStartDrawing = function(firstPointCoords) {\r\n        var newArea = new Rectangle({\r\n            x : firstPointCoords.x,\r\n            y : firstPointCoords.y,\r\n            width: 0,\r\n            height: 0\r\n        });\r\n\r\n        app.addEvent(app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\r\n            .addEvent(app.domElements.container, 'click', newArea.onStopDrawing.bind(newArea));\r\n\r\n        return newArea;\r\n    };\r\n\r\n\r\n    /**\r\n     * The constructor for circles\r\n     *\r\n     *     ------\r\n     *  /         \\\r\n     * |  (x, y)<->| radius\r\n     *  \\         /\r\n     *    ------\r\n     *\r\n     * @constructor\r\n     * @param coords {Object} - object with parameters of new area (cx, cy, radius)\r\n     *                          if some parameter is undefined, it will set 0\r\n     * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title)\r\n     */\r\n    function Circle(coords, attributes) {\r\n        Area.call(this, 'circle', coords, attributes);\r\n\r\n        /**\r\n         * @namespace\r\n         * @property {number} cx - Distance from the left edge of the image to the center of the circle\r\n         * @property {number} cy - Distance from the top edge of the image to the center of the circle\r\n         * @property {number} radius - Radius of the circle\r\n         */\r\n        this._coords = {\r\n            cx : coords.cx || 0,\r\n            cy : coords.cy || 0,\r\n            radius : coords.radius || 0\r\n        };\r\n\r\n        this._el = document.createElementNS(Area.SVG_NS, 'circle');\r\n        this._groupEl.appendChild(this._el);\r\n\r\n        this.helpers = {\r\n            center : new Helper(this._groupEl, coords.cx, coords.cy, 'move'),\r\n            top : new Helper(this._groupEl, coords.cx, coords.cy, 'editTop'),\r\n            bottom : new Helper(this._groupEl, coords.cx, coords.cy, 'editBottom'),\r\n            left : new Helper(this._groupEl, coords.cx, coords.cy, 'editLeft'),\r\n            right : new Helper(this._groupEl, coords.cx, coords.cy, 'editRight')\r\n        };\r\n\r\n        this.redraw();\r\n    }\r\n    utils.inherits(Circle, Area);\r\n\r\n    /**\r\n     * Set attributes for svg-elements of area by new parameters\r\n     *\r\n     * @param coords {Object} - Object with coords of this area (cx, cy, radius)\r\n     * @returns {Circle} - this area\r\n     */\r\n    Circle.prototype.setSVGCoords = function(coords) {\r\n        this._el.setAttribute('cx', coords.cx);\r\n        this._el.setAttribute('cy', coords.cy);\r\n        this._el.setAttribute('r', coords.radius);\r\n\r\n        this.helpers.center.setCoords(coords.cx, coords.cy);\r\n        this.helpers.top.setCoords(coords.cx, coords.cy - coords.radius);\r\n        this.helpers.right.setCoords(coords.cx + coords.radius, coords.cy);\r\n        this.helpers.bottom.setCoords(coords.cx, coords.cy + coords.radius);\r\n        this.helpers.left.setCoords(coords.cx - coords.radius, coords.cy);\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Set coords for this area\r\n     *\r\n     * @param coords {Object} - coordinates for thia area\r\n     * @returns {Circle} - this area\r\n     */\r\n    Circle.prototype.setCoords = function(coords) {\r\n        this._coords.cx = coords.cx;\r\n        this._coords.cy = coords.cy;\r\n        this._coords.radius = coords.radius;\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Calculates new coordinates in process of drawing\r\n     * (for circle normalizeCoords() don't needed because\r\n     * radius are always positive)\r\n     *\r\n     * @param x {number} - x-coordinate\r\n     * @param y {number} - y-coordinate\r\n     * @returns {Object} - calculated coordinates\r\n     */\r\n    Circle.prototype.dynamicDraw = function(x, y) {\r\n        var radius = Math.round(\r\n            Math.sqrt(\r\n                Math.pow(this._coords.cx - x, 2) +\r\n                Math.pow(this._coords.cy - y, 2)\r\n            )\r\n            ),\r\n            newCoords = {\r\n                cx : this._coords.cx,\r\n                cy : this._coords.cy,\r\n                radius : radius\r\n            };\r\n\r\n        this.redraw(newCoords);\r\n\r\n        return newCoords;\r\n    };\r\n\r\n    /**\r\n     * Handler for drawing process (by mousemove)\r\n     * It includes only redrawing area by new coords\r\n     * (this coords doesn't save as own area coords)\r\n     *\r\n     * @params e {MouseEvent} - mousemove event\r\n     */\r\n    Circle.prototype.onProcessDrawing = function(e) {\r\n        var coords = utils.getRightCoords(e.pageX, e.pageY);\r\n\r\n        this.dynamicDraw(coords.x, coords.y);\r\n    };\r\n\r\n    /**\r\n     * Handler for drawing stoping (by second click)\r\n     * It includes redrawing area by new coords\r\n     * and saving this coords as own area coords\r\n     *\r\n     * @params e {MouseEvent} - click event\r\n     */\r\n    Circle.prototype.onStopDrawing = function(e) {\r\n        var coords = utils.getRightCoords(e.pageX, e.pageY);\r\n\r\n        this.setCoords(this.dynamicDraw(coords.x, coords.y)).deselect();\r\n\r\n        app.removeAllEvents()\r\n            .setIsDraw(false)\r\n            .resetNewArea();\r\n    };\r\n\r\n    /**\r\n     * Changes area parameters by editing type and offsets\r\n     *\r\n     * @param {string} editingType - A type of editing\r\n     * @returns {Object} - Object with changed parameters of area\r\n     */\r\n    Circle.prototype.edit = function(editingType, dx, dy) {\r\n        var tempParams = Object.create(this._coords);\r\n\r\n        switch (editingType) {\r\n            case 'move':\r\n                tempParams.cx += dx;\r\n                tempParams.cy += dy;\r\n                break;\r\n\r\n            case 'editTop':\r\n                tempParams.radius -= dy;\r\n                break;\r\n\r\n            case 'editBottom':\r\n                tempParams.radius += dy;\r\n                break;\r\n\r\n            case 'editLeft':\r\n                tempParams.radius -= dx;\r\n                break;\r\n\r\n            case 'editRight':\r\n                tempParams.radius += dx;\r\n                break;\r\n        }\r\n\r\n        return tempParams;\r\n    };\r\n\r\n    /**\r\n     * Calculates new coordinates in process of editing\r\n     *\r\n     * @param tempCoords {Object} - area coords\r\n     * @returns {Object} - calculated coordinates\r\n     */\r\n    Circle.prototype.dynamicEdit = function(tempCoords) {\r\n        if (tempCoords.radius < 0) {\r\n            tempCoords.radius = Math.abs(tempCoords.radius);\r\n        }\r\n\r\n        this.setSVGCoords(tempCoords);\r\n\r\n        return tempCoords;\r\n    };\r\n\r\n    /**\r\n     * Handler for editing process (by mousemove)\r\n     * It includes only redrawing area by new coords\r\n     * (this coords doesn't save as own area coords)\r\n     *\r\n     * @params e {MouseEvent} - mousemove event\r\n     */\r\n    Circle.prototype.onProcessEditing = function(e) {\r\n        var editType = app.getEditType();\r\n\r\n        return this.dynamicEdit(\r\n            this.edit(editType, e.pageX - this.editingStartPoint.x, e.pageY - this.editingStartPoint.y)\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Handler for editing stoping (by mouseup)\r\n     * It includes redrawing area by new coords\r\n     * and saving this coords as own area coords\r\n     *\r\n     * @params e {MouseEvent} - mouseup event\r\n     */\r\n    Circle.prototype.onStopEditing = function(e) {\r\n        var editType = app.getEditType();\r\n\r\n        this.setCoords(this.onProcessEditing(e));\r\n\r\n        app.removeAllEvents();\r\n    };\r\n\r\n    /**\r\n     * Returns string-representation of circle\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Circle.prototype.toString = function() {\r\n        return 'Circle {cx: '+ this._coords.cx +\r\n            ', cy: ' + this._coords.cy +\r\n            ', radius: ' + this._coords.radius + '}';\r\n    }\r\n\r\n    /**\r\n     * Returns html-string of area html element with params of this circle\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Circle.prototype.toHTMLMapElementString = function() {\r\n        return '<area shape=\"circle\" coords=\"'\r\n            + this._coords.cx + ', '\r\n            + this._coords.cy + ', '\r\n            + this._coords.radius\r\n            + '\"'\r\n            + (this._attributes.href ? ' href=\"' + this._attributes.href + '\"' : '')\r\n            + (this._attributes.alt ? ' alt=\"' + this._attributes.alt + '\"' : '')\r\n            + (this._attributes.title ? ' title=\"' + this._attributes.title + '\"' : '')\r\n            + ' />';\r\n    };\r\n\r\n    /**\r\n     * Returns coords for area attributes form\r\n     *\r\n     * @returns {Object} - coordinates of point\r\n     */\r\n    Circle.prototype.getCoordsForDisplayingInfo = function() {\r\n        return {\r\n            x : this._coords.cx,\r\n            y : this._coords.cy\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Returns true if coords is valid for circles and false otherwise\r\n     *\r\n     * @static\r\n     * @param coords {Object} - object width coords for new circle\r\n     * @return {boolean}\r\n     */\r\n    Circle.testCoords = function(coords) {\r\n        return coords.cx && coords.cy && coords.radius;\r\n    };\r\n\r\n    /**\r\n     * Returns true if html coords array is valid for circles and false otherwise\r\n     *\r\n     * @static\r\n     * @param coords {Array} - coords for new circle as array\r\n     * @return {boolean}\r\n     */\r\n    Circle.testHTMLCoords = function(coords) {\r\n        return coords.length === 3;\r\n    };\r\n\r\n    /**\r\n     * Returns circle coords object from html array\r\n     *\r\n     * @param htmlCoordsArray {Array}\r\n     * @returns {Object}\r\n     */\r\n    Circle.getCoordsFromHTMLArray = function(htmlCoordsArray) {\r\n        if (!Circle.testHTMLCoords(htmlCoordsArray)) {\r\n            throw new Error('This html-coordinates is not valid for circle');\r\n        }\r\n\r\n        return {\r\n            cx : htmlCoordsArray[0],\r\n            cy : htmlCoordsArray[1],\r\n            radius : htmlCoordsArray[2]\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Creates new circle and adds drawing handlers for DOM-elements\r\n     *\r\n     * @static\r\n     * @param firstPointCoords {Object}\r\n     * @returns {Circle}\r\n     */\r\n    Circle.createAndStartDrawing = function(firstPointCoords) {\r\n        var newArea = new Circle({\r\n            cx : firstPointCoords.x,\r\n            cy : firstPointCoords.y,\r\n            radius : 0\r\n        });\r\n\r\n        app.addEvent(app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\r\n            .addEvent(app.domElements.container, 'click', newArea.onStopDrawing.bind(newArea));\r\n\r\n        return newArea;\r\n    };\r\n\r\n    /**\r\n     * The constructor for polygons\r\n     *\r\n     *        {x0, y0}\r\n     *           /\\\r\n     *          /  \\\r\n     *         /    \\\r\n     * {x1, y1} ----- {x2, y2}\r\n     *\r\n     * @constructor\r\n     * @param coords {Object} - object with parameters of new area ('points' is list of points)\r\n     *                          if 'points' is empty, it will set to [(0,0)]\r\n     * @param coords.isOpened {boolean} - if polygon is opened (polyline instead polygon)\r\n     * @param attributes {Object} [attributes=undefined] - attributes for area (e.g. href, title)\r\n     */\r\n    function Polygon(coords, attributes) {\r\n        Area.call(this, 'polygon', coords, attributes);\r\n\r\n        /**\r\n         * @namespace\r\n         * @property {Array} points - Array with coordinates of polygon points\r\n         */\r\n        this._coords = {\r\n            points : coords.points || [{x: 0, y: 0}],\r\n            isOpened : coords.isOpened || false\r\n        };\r\n\r\n        this._el = document.createElementNS(\r\n            Area.SVG_NS,\r\n            this._coords.isOpened ? 'polyline' : 'polygon'\r\n        );\r\n        this._groupEl.appendChild(this._el);\r\n\r\n        this._helpers = {\r\n            points : []\r\n        };\r\n\r\n        for (var i = 0, c = this._coords.points.length; i < c; i++) {\r\n            this._helpers.points.push(\r\n                (new Helper(\r\n                        this._groupEl,\r\n                        this._coords.points[i].x,\r\n                        this._coords.points[i].y,\r\n                        'movePoint')\r\n                ).setId(i)\r\n            );\r\n        }\r\n\r\n        this._selectedPoint = -1;\r\n\r\n        this.redraw();\r\n    }\r\n    utils.inherits(Polygon, Area);\r\n\r\n    /**\r\n     * Closes path of the polygon (replaces polyline with polygon)\r\n     */\r\n    Polygon.prototype.close = function() {\r\n        var polyline = this._el;\r\n        this._el = document.createElementNS(Area.SVG_NS, 'polygon');\r\n        this._groupEl.replaceChild(this._el, polyline);\r\n\r\n        this._coords.isOpened = false;\r\n        this.redraw().deselect();\r\n    };\r\n\r\n    /**\r\n     * Set attributes for svg-elements of area by new parameters\r\n     *\r\n     * @param coords {Object} - Object with coords of this area, with field 'points'\r\n     * @returns {Polygon} - this area\r\n     */\r\n    Polygon.prototype.setSVGCoords = function(coords) {\r\n        var polygonPointsAttrValue = coords.points.reduce(function(previousValue, currentItem) {\r\n            return previousValue + currentItem.x + ' ' + currentItem.y + ' ';\r\n        }, '');\r\n\r\n        this._el.setAttribute('points', polygonPointsAttrValue);\r\n        utils.foreach(this._helpers.points, function(helper, i) {\r\n            helper.setCoords(coords.points[i].x, coords.points[i].y);\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Set coords for this area\r\n     *\r\n     * @param coords {coords}\r\n     * @returns {Polygon} - this area\r\n     */\r\n    Polygon.prototype.setCoords = function(coords) {\r\n        this._coords.points = coords.points;\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Adds new point to polygon (and new helper too)\r\n     *\r\n     * @param x {number} - x-coordinate of new point\r\n     * @param y {number} - y-coordinate of new point\r\n     * @returns {Polygon} - this area\r\n     */\r\n    Polygon.prototype.addPoint = function(x, y) {\r\n        if (!this._coords.isOpened) {\r\n            throw new Error('This polygon is closed!');\r\n        }\r\n\r\n        var helper = new Helper(this._groupEl, x, y, 'movePoint');\r\n        helper.setId(this._helpers.points.length);\r\n\r\n        this._helpers.points.push(helper);\r\n        this._coords.points.push({\r\n            x : x,\r\n            y : y\r\n        });\r\n        this.redraw();\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Calculates new coordinates in process of drawing\r\n     *\r\n     * @param x {number}\r\n     * @param y {number}\r\n     * @param isRightAngle {boolean}\r\n     * @returns {Object} - calculated coordinates\r\n     */\r\n    Polygon.prototype.dynamicDraw = function(x, y, isRightAngle) {\r\n        var temp_coords = {\r\n            points: [].concat(this._coords.points)\r\n        };\r\n\r\n        if (isRightAngle) {\r\n            var rightPointCoords = Polygon.getRightAngleLineLastPointCoords(\r\n                this._coords, {x: x, y: y}\r\n            );\r\n            x = rightPointCoords.x;\r\n            y = rightPointCoords.y;\r\n        }\r\n\r\n        temp_coords.points.push({x : x, y : y});\r\n\r\n        this.redraw(temp_coords);\r\n\r\n        return temp_coords;\r\n    };\r\n\r\n    /**\r\n     * Handler for drawing process (by mousemove)\r\n     * It includes only redrawing area by new coords\r\n     * (this coordinates doesn't save as own area coords)\r\n     *\r\n     * @params e {MouseEvent} - mousemove event\r\n     */\r\n    Polygon.prototype.onProcessDrawing = function(e) {\r\n        var coords = utils.getRightCoords(e.pageX, e.pageY);\r\n\r\n        this.dynamicDraw(coords.x, coords.y, e.shiftKey);\r\n    };\r\n\r\n    /**\r\n     * Handler for polygon pointer adding (by click on drawing canvas)\r\n     * It includes redrawing area with this new point\r\n     * and saving this point to list of polygon points\r\n     *\r\n     * @params e {MouseEvent} - click event\r\n     */\r\n    Polygon.prototype.onAddPointDrawing = function(e) {\r\n        var newPointCoords = utils.getRightCoords(e.pageX, e.pageY);\r\n\r\n        if (e.shiftKey) {\r\n            newPointCoords = Polygon.getRightAngleLineLastPointCoords(this._coords, newPointCoords);\r\n        }\r\n\r\n        this.addPoint(newPointCoords.x, newPointCoords.y);\r\n    };\r\n\r\n    /**\r\n     * Handler for drawing stoping (by click on first helper or press ENTER key)\r\n     * It includes redrawing area by new coords, closing this polygon\r\n     * and saving this coords as own area coords\r\n     *\r\n     * @params e {KeyboardEvent|MouseEvent} - click or keydown event\r\n     */\r\n    Polygon.prototype.onStopDrawing = function(e) {\r\n        if (e.type == 'click' || (e.type == 'keydown' && e.keyCode == 13)) {\r\n            if (Polygon.testCoords(this._coords)) {\r\n                this.close();\r\n\r\n                app.removeAllEvents()\r\n                    .setIsDraw(false)\r\n                    .resetNewArea();\r\n            }\r\n        }\r\n        e.stopPropagation();\r\n    };\r\n\r\n    /**\r\n     * Changes area parameters by editing type and offsets\r\n     *\r\n     * @param {string} editingType - A type of editing\r\n     * @returns {Object} - Object with changed parameters of area\r\n     */\r\n    Polygon.prototype.edit = function(editingType, dx, dy) {\r\n        var tempParams = Object.create(this._coords);\r\n\r\n        switch (editingType) {\r\n            case 'move':\r\n                for (var i = 0, c = tempParams.points.length; i < c; i++) {\r\n                    tempParams.points[i].x += dx;\r\n                    tempParams.points[i].y += dy;\r\n                }\r\n                break;\r\n\r\n            case 'movePoint':\r\n                tempParams.points[this.selected_point].x += dx;\r\n                tempParams.points[this.selected_point].y += dy;\r\n                break;\r\n        }\r\n\r\n        return tempParams;\r\n    };\r\n\r\n    /**\r\n     * Handler for editing process (by mousemove)\r\n     * It includes only redrawing area by new coords\r\n     * (this coords doesn't save as area coords)\r\n     *\r\n     * @params e {MouseEvent} - mousemove event\r\n     */\r\n    Polygon.prototype.onProcessEditing = function(e) {\r\n        var editType = app.getEditType();\r\n\r\n        this.redraw(\r\n            this.edit(\r\n                editType,\r\n                e.pageX - this.editingStartPoint.x,\r\n                e.pageY - this.editingStartPoint.y\r\n            )\r\n        );\r\n\r\n        this.editingStartPoint.x = e.pageX;\r\n        this.editingStartPoint.y = e.pageY;\r\n    };\r\n\r\n    /**\r\n     * Handler for editing stoping (by mouseup on drawing canvas)\r\n     * It includes redrawing area by new coords and saving this new coords\r\n     * as own area coords\r\n     *\r\n     * @params e {MouseEvent} - click or keydown event\r\n     */\r\n    Polygon.prototype.onStopEditing = function(e) {\r\n        var editType = app.getEditType();\r\n\r\n        this.setCoords(\r\n            this.edit(\r\n                editType,\r\n                e.pageX - this.editingStartPoint.x,\r\n                e.pageY - this.editingStartPoint.y\r\n            )\r\n        ).redraw();\r\n\r\n        app.removeAllEvents();\r\n    };\r\n\r\n    /**\r\n     * Returns string-representation of polygon\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Polygon.prototype.toString = function() {\r\n        return 'Polygon {points: ['+\r\n            this._coords.points.map(function(item) {\r\n                return '[' + item.x + ', ' + item.y + ']'\r\n            }).join(', ') + ']}';\r\n    }\r\n\r\n    /**\r\n     * Returns html-string of area html element with params of this polygon\r\n     *\r\n     * @returns {string}\r\n     */\r\n    Polygon.prototype.toHTMLMapElementString = function() {\r\n        var str = this._coords.points.map(function(item) {\r\n            return item.x + ', ' + item.y;\r\n        }).join(', ');\r\n\r\n        return '<area shape=\"poly\" coords=\"'\r\n            + str\r\n            + '\"'\r\n            + (this._attributes.href ? ' href=\"' + this._attributes.href + '\"' : '')\r\n            + (this._attributes.alt ? ' alt=\"' + this._attributes.alt + '\"' : '')\r\n            + (this._attributes.title ? ' title=\"' + this._attributes.title + '\"' : '')\r\n            + ' />';\r\n    };\r\n\r\n    /**\r\n     * Returns coords for area attributes form\r\n     *\r\n     * @returns {Object} - coordinates of point\r\n     */\r\n    Polygon.prototype.getCoordsForDisplayingInfo = function() {\r\n        return {\r\n            x : this._coords.points[0].x,\r\n            y : this._coords.points[0].y\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Returns true if coords is valid for polygons and false otherwise\r\n     *\r\n     * @static\r\n     * @param coords {Object} - object with coords for new polygon\r\n     * @returns {boolean}\r\n     */\r\n    Polygon.testCoords = function(coords) {\r\n        return coords.points.length >= 3;\r\n    };\r\n\r\n    /**\r\n     * Returns true if html coords array is valid for polygons and false otherwise\r\n     *\r\n     * @static\r\n     * @param coords {Array} - coords for new polygon as array [x1, y1, x2, y2, x3, y3, ...]\r\n     * @returns {boolean}\r\n     */\r\n    Polygon.testHTMLCoords = function(coords) {\r\n        return coords.length >= 6 && coords.length % 2 === 0;\r\n    };\r\n\r\n    /**\r\n     * Returns polygon coords object from html array\r\n     *\r\n     * @param htmlCoordsArray {Array}\r\n     * @returns {Object} - object with calculated points\r\n     */\r\n    Polygon.getCoordsFromHTMLArray = function(htmlCoordsArray) {\r\n        if (!Polygon.testHTMLCoords(htmlCoordsArray)) {\r\n            throw new Error('This html-coordinates is not valid for polygon');\r\n        }\r\n\r\n        var points = [];\r\n        for (var i = 0, c = htmlCoordsArray.length/2; i < c; i++) {\r\n            points.push({\r\n                x : htmlCoordsArray[2*i],\r\n                y : htmlCoordsArray[2*i + 1]\r\n            });\r\n        }\r\n\r\n        return {\r\n            points : points\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Returns coords of new point with right angle (or 45 deg) for last line\r\n     * This method recalculates coordinates of new point for\r\n     * last line with (0 | 45 | 90 | 135 | 180 | 225 | 270 | 315) deg\r\n     * For example,\r\n     * for (0 < deg < 23) -> 0 deg\r\n     * for (23 < deg < 67) -> 45 deg\r\n     * for (67 < deg < 90) -> 90 deg etc.\r\n     *\r\n     *         0\r\n     *    315\\ | /45\r\n     *        \\|/\r\n     * 270 --------- 90\r\n     *        /|\\\r\n     *    225/ | \\135\r\n     *        180\r\n     *\r\n     * @static\r\n     * @param originalCoords {Object} - Coordinates of this area (without new point)\r\n     * @param newPointCoords {Object} - Coordinates of new point\r\n     * @returns {Object} - Right coordinates for last point\r\n     */\r\n    Polygon.getRightAngleLineLastPointCoords = function(originalCoords, newPointCoords) {\r\n        var TANGENS = {\r\n                DEG_22 : 0.414,\r\n                DEG_67 : 2.414\r\n            },\r\n            lastPointIndex = originalCoords.points.length - 1,\r\n            lastPoint = originalCoords.points[lastPointIndex],\r\n            dx = newPointCoords.x - lastPoint.x,\r\n            dy = -(newPointCoords.y - lastPoint.y),\r\n            tan = dy / dx,\r\n            x = newPointCoords.x,\r\n            y = newPointCoords.y;\r\n\r\n        if (dx > 0 && dy > 0) {\r\n            if (tan > TANGENS.DEG_67) {\r\n                x = lastPoint.x;\r\n            } else if (tan < TANGENS.DEG_22) {\r\n                y = lastPoint.y;\r\n            } else {\r\n                Math.abs(dx) > Math.abs(dy) ?\r\n                    (x = lastPoint.x + dy) : (y = lastPoint.y - dx);\r\n            }\r\n        } else if (dx < 0 && dy > 0) {\r\n            if (tan < -TANGENS.DEG_67) {\r\n                x = lastPoint.x;\r\n            } else if (tan > -TANGENS.DEG_22) {\r\n                y = lastPoint.y;\r\n            } else {\r\n                Math.abs(dx) > Math.abs(dy) ?\r\n                    (x = lastPoint.x - dy) : (y = lastPoint.y + dx);\r\n            }\r\n        } else if (dx < 0 && dy < 0) {\r\n            if (tan > TANGENS.DEG_67) {\r\n                x = lastPoint.x;\r\n            } else if (tan < TANGENS.DEG_22) {\r\n                y = lastPoint.y;\r\n            } else {\r\n                Math.abs(dx) > Math.abs(dy) ?\r\n                    (x = lastPoint.x + dy) : (y = lastPoint.y - dx);\r\n            }\r\n        } else if (dx > 0 && dy < 0) {\r\n            if (tan < -TANGENS.DEG_67) {\r\n                x = lastPoint.x;\r\n            } else if (tan > -TANGENS.DEG_22) {\r\n                y = lastPoint.y;\r\n            } else {\r\n                Math.abs(dx) > Math.abs(dy) ?\r\n                    (x = lastPoint.x - dy) : (y = lastPoint.y + dx);\r\n            }\r\n        }\r\n\r\n        return {\r\n            x : x,\r\n            y : y\r\n        };\r\n    };\r\n\r\n    /**\r\n     * Creates new polygon and add drawing handlers for DOM-elements\r\n     *\r\n     * @static\r\n     * @param firstPointCoords {Object} - coords for first point of polyline\r\n     * @returns {Polygon} - created polygon\r\n     */\r\n    Polygon.createAndStartDrawing = function(firstPointCoords) {\r\n        var newArea = new Polygon({\r\n            points : [firstPointCoords],\r\n            isOpened : true\r\n        });\r\n\r\n        app.addEvent(app.domElements.container, 'mousemove', newArea.onProcessDrawing.bind(newArea))\r\n            .addEvent(app.domElements.container, 'click', newArea.onAddPointDrawing.bind(newArea))\r\n            .addEvent(document, 'keydown', newArea.onStopDrawing.bind(newArea))\r\n            .addEvent(newArea._helpers.points[0]._el, 'click', newArea.onStopDrawing.bind(newArea));\r\n\r\n        return newArea;\r\n    };\r\n\r\n    /* TODO: this modules will use app.js */\r\n    /* Help block */\r\n    var help = (function() {\r\n        var block = utils.id('help'),\r\n            overlay = utils.id('overlay'),\r\n            close_button = block.querySelector('.close_button');\r\n\r\n        function hide() {\r\n            utils.hide(block);\r\n            utils.hide(overlay);\r\n        }\r\n\r\n        function show() {\r\n            utils.show(block);\r\n            utils.show(overlay);\r\n        }\r\n\r\n        overlay.addEventListener('click', hide, false);\r\n\r\n        close_button.addEventListener('click', hide, false);\r\n\r\n        return {\r\n            show : show,\r\n            hide : hide\r\n        };\r\n    })();\r\n\r\n    /* For html code of created map */\r\n    var code = (function(){\r\n        var block = utils.id('code'),\r\n            content = utils.id('code_content'),\r\n            close_button = block.querySelector('.close_button');\r\n\r\n        close_button.addEventListener('click', function(e) {\r\n            utils.hide(block);\r\n            e.preventDefault();\r\n        }, false);\r\n\r\n        return {\r\n            print: function() {\r\n                content.innerHTML = app.getHTMLCode(true);\r\n                utils.show(block);\r\n            },\r\n            hide: function() {\r\n                utils.hide(block);\r\n            }\r\n        };\r\n    })();\r\n\r\n\r\n    /* Edit selected area info */\r\n    var info = (function() {\r\n        var obj;\r\n\r\n        function save(e) {\r\n            let attributes = {};\r\n            $('input, select, textarea', $('.popup-box form')).each(function () {\r\n                let val = $(this).val();\r\n                if (typeof val === 'string') {\r\n                    val = val.replace(/'/g, \"&rsquo;\").replace(/\"/g, \"&rdquo;\")\r\n                }\r\n                let name = $(this).attr('name');\r\n                if (val) {\r\n                    switch (typeof attributes[name]) {\r\n                        case \"string\":\r\n                            attributes[name] = [attributes[name], val];\r\n                            break;\r\n                        case \"object\":\r\n                            attributes[name].push(val);\r\n                            break;\r\n                        case \"undefined\":\r\n                            attributes[name] = val\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n\r\n            obj.setInfoAttributes(attributes);\r\n\r\n            obj[obj.href ? 'setStyleOfElementWithHref' : 'unsetStyleOfElementWithHref']();\r\n\r\n            unload();\r\n        }\r\n\r\n        function unload() {\r\n            obj = null;\r\n            $('.popup-box-wrap:last').remove();\r\n            $(window).trigger('popupUnload')\r\n        }\r\n\r\n        return {\r\n            load : function(object) {\r\n                obj = object;\r\n                attributesPopup(object, save, unload)\r\n            },\r\n            unload : unload\r\n        };\r\n    })();\r\n\r\n\r\n    /* Load areas from html code */\r\n    var from_html_form = (function() {\r\n        var form = utils.id('from_html_wrapper'),\r\n            code_input = utils.id('code_input'),\r\n            load_button = utils.id('load_code_button'),\r\n            close_button = form.querySelector('.close_button');\r\n\r\n        function load(e) {\r\n            if (Area.createAreasFromHTMLOfMap(code_input.value)) {\r\n                hide();\r\n            }\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function hide() {\r\n            utils.hide(form);\r\n        }\r\n\r\n        load_button.addEventListener('click', load, false);\r\n\r\n        close_button.addEventListener('click', hide, false);\r\n\r\n        return {\r\n            show : function() {\r\n                code_input.value = '';\r\n                utils.show(form);\r\n            },\r\n            hide : hide\r\n        };\r\n    })();\r\n\r\n\r\n\r\n\r\n    /* Buttons and actions */\r\n    var buttons = (function() {\r\n        var all = $('.tools-bar span'),\r\n            save = utils.id('save'),\r\n            load = utils.id('load'),\r\n            rectangle = utils.id('rectangle'),\r\n            circle = utils.id('circle'),\r\n            polygon = utils.id('polygon'),\r\n            edit = utils.id('edit'),\r\n            clear = utils.id('clear'),\r\n            from_html = utils.id('from_html'),\r\n            to_html = utils.id('to_html'),\r\n            preview = utils.id('preview'),\r\n            show_help = utils.id('show_help');\r\n\r\n        function deselectAll() {\r\n            all.removeClass(Area.CLASS_NAMES.SELECTED)\r\n        }\r\n\r\n        function selectOne(button) {\r\n            deselectAll();\r\n            button.classList.add(Area.CLASS_NAMES.SELECTED);\r\n        }\r\n\r\n        function onSaveButtonClick(e) {\r\n            // Save in localStorage\r\n            app.saveInLocalStorage();\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onLoadButtonClick(e) {\r\n            // Load from localStorage\r\n            app.clear()\r\n                .loadFromLocalStorage();\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onShapeButtonClick(e) {\r\n            // shape = rect || circle || polygon\r\n            app.setMode('drawing')\r\n                .setDrawClass()\r\n                .setShape(this.id)\r\n                .deselectAll()\r\n                .hidePreview();\r\n            info.unload();\r\n            selectOne(this);\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onClearButtonClick(e) {\r\n            // Clear all\r\n            if (confirm('Clear all?')) {\r\n                app.setMode(null)\r\n                    .setDefaultClass()\r\n                    .setShape(null)\r\n                    .clear()\r\n                    .hidePreview();\r\n                deselectAll();\r\n            }\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onFromHtmlButtonClick(e) {\r\n            // Load areas from html\r\n            from_html_form.show();\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onToHtmlButtonClick(e) {\r\n            // Generate html code only\r\n            info.unload();\r\n            code.print();\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onPreviewButtonClick(e) {\r\n            if (app.getMode() === 'preview') {\r\n                app.setMode(null)\r\n                    .hidePreview();\r\n                deselectAll();\r\n            } else {\r\n                app.deselectAll()\r\n                    .setMode('preview')\r\n                    .setDefaultClass()\r\n                    .preview();\r\n                selectOne(this);\r\n            }\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onEditButtonClick(e) {\r\n            if (app.getMode() === 'editing') {\r\n                app.setMode(null)\r\n                    .setDefaultClass()\r\n                    .deselectAll();\r\n                deselectAll();\r\n                utils.show(domElements.svg);\r\n            } else {\r\n                app.setShape(null)\r\n                    .setMode('editing')\r\n                    .setEditClass();\r\n                selectOne(this);\r\n            }\r\n            app.hidePreview();\r\n            e.preventDefault();\r\n        }\r\n\r\n        function onShowHelpButtonClick(e) {\r\n            help.show();\r\n\r\n            e.preventDefault();\r\n        }\r\n\r\n        $(save).on('click', onSaveButtonClick);\r\n        $(load).on('click', onLoadButtonClick);\r\n        $(rectangle).on('click', onShapeButtonClick);\r\n        $(circle).on('click', onShapeButtonClick);\r\n        $(polygon).on('click', onShapeButtonClick);\r\n        $(clear).on('click', onClearButtonClick);\r\n        $(from_html).on('click', onFromHtmlButtonClick);\r\n        $(to_html).on('click', onToHtmlButtonClick);\r\n        $(preview).on('click', onPreviewButtonClick);\r\n        $(edit).on('click', onEditButtonClick);\r\n        $(show_help).on('click', onShowHelpButtonClick);\r\n        /*save.addEventListener('click', onSaveButtonClick, false);\r\n        load.addEventListener('click', onLoadButtonClick, false);\r\n        rectangle.addEventListener('click', onShapeButtonClick, false);\r\n        circle.addEventListener('click', onShapeButtonClick, false);\r\n        polygon.addEventListener('click', onShapeButtonClick, false);\r\n        clear.addEventListener('click', onClearButtonClick, false);\r\n        from_html.addEventListener('click', onFromHtmlButtonClick, false);\r\n        to_html.addEventListener('click', onToHtmlButtonClick, false);\r\n        preview.addEventListener('click', onPreviewButtonClick, false);\r\n        edit.addEventListener('click', onEditButtonClick, false);\r\n        show_help.addEventListener('click', onShowHelpButtonClick, false);*/\r\n    })();\r\n\r\n    return {\r\n        toJSON : app.toJSON,\r\n        fromJSON : function(str) {\r\n            var obj = JSON.parse(str);\r\n\r\n            utils.foreach(obj.areas, function(areaParams) {\r\n                Area.fromJSON(areaParams);\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport default summerHtmlImageMapCreator;","import popUpContent from \"src/popup-content-wraper\";\r\n\r\nlet save = function(data = {\r\n    image: '',\r\n    button: '',\r\n    imageMap: '',\r\n    form: '',\r\n    saveUrl: 'image-maps/save'\r\n}){\r\n\r\n    let savePage = function(){\r\n        let pageData = data.form.serializeArray();\r\n\r\n        pageData.push({\r\n            name: 'image',\r\n            value:  data.image.attr('src').split('/').slice(-1)[0]\r\n        });\r\n        pageData.push({\r\n            name: 'map',\r\n            value:  data.imageMap.toJSON()\r\n        });\r\n\r\n        $.post(data.saveUrl, pageData, function(response){\r\n\r\n            let inputMapsId = $('input[name=\"maps_id\"]', data.form);\r\n            let mapsIdTmp = inputMapsId.val();\r\n\r\n            inputMapsId.val(response.maps_id);\r\n\r\n            if (mapsIdTmp !== response.maps_id) {\r\n                window.history.pushState('', '', 'image-maps/edit?maps_id=' + response.maps_id);\r\n            }\r\n\r\n            console.log(response);\r\n\r\n            if (response.status === 'ok') {\r\n                alertMessage(popUpContent(response.text));\r\n                setTimeout(function(){ $('.popup-box-wrap:last').remove() }, 1000)\r\n            }\r\n\r\n        }, 'json')\r\n    };\r\n\r\n    data.button.on('click', savePage);\r\n    data.form.on('submit', savePage)\r\n\r\n};\r\nexport default save;","// extracted by mini-css-extract-plugin","import searchProduct from \"src/search-product\";\r\nimport searchCategory from \"src/search-category\";\r\nimport searchInfo from \"src/search-info-page\";\r\n$.fn.searchProduct = searchProduct;\r\n$.fn.searchCategory = searchCategory;\r\n$.fn.searchInfo = searchInfo;\r\n\r\n$.fn.cloneRow = function(){\r\n    return this.each(function(){\r\n        $(this).addClass('cloned').append('<span class=\"remove\"></span>');\r\n\r\n        $('input, select, textarea', this).each(function(){\r\n            this.addEventListener('keydown', function(e) { e.stopPropagation(); }, false);\r\n            $(this).val('')\r\n        });\r\n\r\n        $('.remove', this).on('click', () => $(this).remove())\r\n    })\r\n};\r\n\r\nlet attributesPopup = function(object, save, unload){\r\n\r\n    let popupTemplateHolder = $('#svg-item-attributes');\r\n\r\n    let popupTemplate = popupTemplateHolder.html();\r\n\r\n    let popupContent = function(){\r\n\r\n        popupTemplateHolder.html('');\r\n\r\n        let form = $('.popup-box form');\r\n        let popUpInputs = $('input, select, textarea', form);\r\n\r\n        popUpInputs.each(function(){\r\n            let name = $(this).attr('name');\r\n            let val  = object._attributes[$(this).attr('name')];\r\n            if (typeof val === \"object\") {\r\n                let repetitiveBox = $('.r-'+name.replace(/\\[[0-9]+\\]/, ''));\r\n                if (repetitiveBox.length !== val.length){\r\n                    let needAdd = val.length - repetitiveBox.length;\r\n                    for(let i = 0; i < needAdd; i++) {\r\n                        repetitiveBox.after(repetitiveBox.clone().cloneRow())\r\n                    }\r\n                }\r\n                $('*[name=\"' + name + '\"]', form).each(function(i){\r\n                    this.addEventListener('keydown', function(e) { e.stopPropagation(); }, false);\r\n                    if (typeof val[i] === 'string') {\r\n                        val[i] = val[i].replace(/\\&rsquo\\;/g, \"'\").replace(/\\&rdquo\\;/g, \"\\\"\");\r\n                    }\r\n                    $(this).val(val[i])\r\n                })\r\n            } else {\r\n                this.addEventListener('keydown', function(e) { e.stopPropagation(); }, false);\r\n                if (typeof val === 'string') {\r\n                    val = val.replace(/\\&rsquo\\;/g, \"'\").replace(/\\&rdquo\\;/g, \"\\\"\");\r\n                }\r\n                $(this).val(val);\r\n            }\r\n\r\n        });\r\n\r\n        form.on('submit', function(e){\r\n            e.preventDefault();\r\n\r\n            save();\r\n\r\n            return false;\r\n        });\r\n\r\n        $('.popup-tabs-wrap').addClass('tabbable tabbable-custom box-style-tab');\r\n        $('.popup-tabs').addClass('nav nav-tabs nav-tabs-scroll style-tabs');\r\n        $('.popup-tab-content').addClass('tab-content');\r\n        $('.popup-tab-pane').addClass('tab-pane');\r\n\r\n        $('.nav-tabs-scroll').scrollingTabs();\r\n\r\n        $('.nav-tabs a').on('click', function(){\r\n            $('.popup-tab-pane').removeClass('active');\r\n            let href = $(this).attr('href');\r\n            $(''+href).addClass('active')\r\n        });\r\n\r\n\r\n\r\n        let linkToPage = $('.link-to-page');\r\n        let linkDefault = $('.link-default');\r\n        let linkToProduct = $('.link-to-product');\r\n        let linkToCategory = $('.link-to-category');\r\n        let linkToInfo = $('.link-to-info');\r\n        let linkToBrand = $('.link-to-brand');\r\n        let linkToDelivery = $('.link-to-delivery');\r\n        let linkToCommon = $('.link-to-common');\r\n        let selectLinkType = function(){\r\n            if (!$(this).val()) $(this).val('link-to-product');\r\n            linkToPage.hide();\r\n            switch ($(this).val()) {\r\n                case 'link-to-category':\r\n                    linkToCategory.show();\r\n                    break;\r\n                case 'link-to-info':\r\n                    linkToInfo.show();\r\n                    break;\r\n                case 'link-default':\r\n                    linkDefault.show();\r\n                    break;\r\n                case 'link-to-brand':\r\n                    linkToBrand.show();\r\n                    break;\r\n                case 'link-to-delivery':\r\n                    linkToDelivery.show();\r\n                    break;\r\n                case 'link-to-common':\r\n                    linkToCommon.show();\r\n                    break;\r\n                case 'link-to-product':\r\n                    linkToProduct.show();\r\n                    break;\r\n            }\r\n        };\r\n        $('select[name=\"link\"]')\r\n            .each(selectLinkType)\r\n            .on('change', selectLinkType);\r\n\r\n        linkDefault.show();\r\n        linkToCommon.show();\r\n        setTimeout(function(){\r\n            $('select[name=\"link\"]')\r\n                .each(selectLinkType)\r\n        }, 100)\r\n\r\n\r\n        $('.product-name').searchProduct({\r\n            suggestItemClick: function(input, itemObj){\r\n                $('input[name=\"products_id\"]', input.closest('.row')).val(itemObj.data('id'));\r\n            }\r\n        });\r\n\r\n        $('.category-name').searchCategory({\r\n            suggestItemClick: function(input, itemObj){\r\n                $('input[name=\"categories_id\"]', input.closest('.row')).val(itemObj.data('id'));\r\n            }\r\n        });\r\n\r\n        $('.information-name').searchInfo({\r\n            suggestItemClick: function(input, itemObj){\r\n                $('input[name=\"information_id\"]', input.closest('.row')).val(itemObj.data('id'));\r\n            }\r\n        });\r\n\r\n        $('.brand-name').searchInfo({\r\n            url: 'categories/brands-list',\r\n            suggestItemClick: function(input, itemObj){\r\n                $('input[name=\"brand_id\"]', input.closest('.row')).val(itemObj.data('id'));\r\n            }\r\n        });\r\n\r\n        $('.delivery-name').searchCategory({\r\n            url: 'seo-delivery-location/all-list',\r\n            suggestItemClick: function(input, itemObj){\r\n                $('input[name=\"delivery_id\"]', input.closest('.row')).val(itemObj.data('id'));\r\n            }\r\n        });\r\n\r\n        $('.btn-add-more').on('click', function(){\r\n            let repetitiveBox = $('.'+$(this).data('repeat') + ':last');\r\n            let clone = repetitiveBox.clone().cloneRow();\r\n            $('.product-name', clone).searchProduct({\r\n                suggestItemClick: function(input, itemObj){\r\n                    $('input[name=\"products_id\"]', clone).val(itemObj.data('id'));\r\n                }\r\n            });\r\n            $('.category-name', clone).searchCategory({\r\n                suggestItemClick: function(input, itemObj){\r\n                    $('input[name=\"categories_id\"]', clone).val(itemObj.data('id'));\r\n                }\r\n            });\r\n            $('.information-name', clone).searchInfo({\r\n                suggestItemClick: function(input, itemObj){\r\n                    $('input[name=\"information_id\"]', clone).val(itemObj.data('id'));\r\n                }\r\n            });\r\n            $('.brand-name', clone).searchInfo({\r\n                suggestItemClick: function(input, itemObj){\r\n                    url: 'categories/brands-list',\r\n                    $('input[name=\"brand_id\"]', clone).val(itemObj.data('id'));\r\n                }\r\n            });\r\n            $('.delivery-name', clone).searchCategory({\r\n                url: 'seo-delivery-location/all-list',\r\n                suggestItemClick: function(input, itemObj){\r\n                    $('input[name=\"delivery_id\"]', clone).val(itemObj.data('id'));\r\n                }\r\n            });\r\n            repetitiveBox.after(clone)\r\n        })\r\n\r\n\r\n    };\r\n\r\n    $('<a href=\"#svg-item-attributes\"></a>').popUp({\r\n        close:  function(){\r\n            $('.popup-box').on('click', '.btn-cancel, .pop-up-close', function(){\r\n                popupTemplateHolder.html(popupTemplate);\r\n                unload();\r\n                return false\r\n            });\r\n        },\r\n        box_class: 'widget-settings',\r\n        loaded: popupContent\r\n    }).click();\r\n\r\n    $(window).on('popupUnload', function(){\r\n        if (popupTemplate) {\r\n            popupTemplateHolder.html(popupTemplate);\r\n        }\r\n    })\r\n\r\n};\r\nexport default attributesPopup;\r\n","import popUpContent from \"src/popup-content-wraper\";\r\n\r\nlet img = function(data = {\r\n    image: '',\r\n    button: '',\r\n    uploadUrl: 'image-maps/upload',\r\n    svg: ''\r\n}){\r\n    let applySvgSize = function(){\r\n        data.image.css({\r\n            'position': 'absolute',\r\n        });\r\n        let height = data.image.height();\r\n        let width = data.image.width();\r\n        data.image.css({\r\n            'position': '',\r\n        });\r\n\r\n        let svg = data.svg.get(0);\r\n        svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\r\n        svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\r\n    };\r\n    applySvgSize();\r\n\r\n    data.image.on('load', applySvgSize);\r\n\r\n    let applyImage = function(file){\r\n        data.image.css('display', '');\r\n        data.image.attr('src', '../images/maps/' + file);\r\n        $('.popup-box-wrap:last').remove();\r\n        applySvgSize();\r\n        data.image.on('load', applySvgSize);\r\n    };\r\n\r\n    data.button.dropzone({\r\n        url: data.uploadUrl,\r\n        previewTemplate: '<span data-dz-name></span>',\r\n        success: function(e, data){\r\n            data = JSON.parse(data);\r\n            data = data[0];\r\n            if (data.status === 'ok') {\r\n                applyImage(data.file)\r\n            }\r\n\r\n            if (data.status === 'error') {\r\n                alertMessage( popUpContent(data.text) );\r\n            }\r\n\r\n            if (data.status === 'choice') {\r\n                alertMessage( popUpContent(data.text, [\r\n                    {'name': 'ok', 'class': 'btn-ok'},\r\n                    {'name': 'cancel', 'class': 'btn-cancel'}\r\n                ]) );\r\n\r\n                $('.btn-ok').on('click', function(){\r\n                    applyImage(data.file)\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n};\r\nexport default img;"],"sourceRoot":""}